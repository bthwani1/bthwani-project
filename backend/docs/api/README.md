# ๐ API Documentation

## ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงููุฌูุฏ ูุญุชูู ุนูู ุชูุซูู ุดุงูู ูู API ูุธุงู Bthwaniุ ุจูุง ูู ุฐูู:

- **Postman Collection**: ูุฌููุนุฉ ุทูุจุงุช API ุฌุงูุฒุฉ ููุงุฎุชุจุงุฑ
- **ูุฎุทุท ุนูุงูุงุช ุงูุจูุงูุงุช**: ุฑุณูู ุจูุงููุฉ ุชูุถุญ ุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ุฃุฏูุงุช ุงูุชุตุฏูุฑ**: ุณูุฑูุจุชุงุช ูุชุตุฏูุฑ ุงูุชูุซูู ุงูุขูู

## ๐ ูููู ุงููุฌูุฏ

```
docs/api/
โโโ postman_collection.json      # ูุฌููุนุฉ ุทูุจุงุช Postman
โโโ data-map.mermaid.md         # ูุฎุทุท ุนูุงูุงุช ุงูุจูุงูุงุช
โโโ endpoint-inventory.json      # ุฌุฑุฏ ุขูู ููู ูุณุงุฑุงุช ุงูุจุงู ุฅูุฏ
โโโ frontend-usage.json          # ุงุณุชููุงู ุงููุฑููุช ุฅูุฏ ููุณุงุฑุงุช API
โโโ backend-frontend-map.json    # ูุทุงุจูุฉ ุงููุณุงุฑุงุช ุจูู ุงูุจุงู ูุงููุฑููุช
โโโ backend-endpoint-report.md   # ุชูุฑูุฑ ุดุงูู ุจุงูุชุบุทูุฉ ูุงูุงุณุชุฎุฏุงู
โโโ exports/                    # ูุฌูุฏ ุงูุชุตุฏูุฑ ุงูุขูู
โ   โโโ swagger.json           # ููุงุตูุงุช OpenAPI (ุงุฎุชูุงุฑู)
โ   โโโ postman_collection.json # ูุณุฎุฉ ูู ุงููุฌููุนุฉ
โ   โโโ collection-summary.json # ููุฎุต ุงููุฌููุนุฉ
โ   โโโ data-relationships.mermaid.md # ูุณุฎุฉ ูู ูุฎุทุท ุงูุจูุงูุงุช
โ   โโโ schema-overview.json   # ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุจูุงูุงุช
โ   โโโ README.md              # ุฏููู ุงุณุชุฎุฏุงู ุงูุชุตุฏูุฑ
โโโ README.md                  # ูุฐุง ุงูููู
```

## ๐งฎ ุชูุงุฑูุฑ ุงูุชุบุทูุฉ ุงูุขููุฉ

- **`endpoint-inventory.json`**: ูุงุชุฌ ุณูุฑูุจุช ุขูู ูุญุตู ุฌููุน `routes` ูู ุงูุจุงู ุฅูุฏ ูุน ุงููุณุงุฑุงุช ูุงูููุซูุฏ.
- **`frontend-usage.json`**: ุฌุฑุฏ ุฏููู ูุฌููุน ุงููุฏุงุกุงุช ุงูุตุงุฏุฑุฉ ูู ุชุทุจููุงุช ุงููุฑููุช ุฅูุฏ ุงูุฑุฆูุณูุฉ.
- **`backend-frontend-map.json`**: ููู JSON ูุทุงุจู ูู ุฅูุฏุจูููุช ูู ุงูุจุงู ุฅูุฏ ูุน ูู ูุณุชุฎุฏูู ูู ุงููุฑููุช ุฅูุฏ (ุฅู ูุฌุฏ).
- **`backend-endpoint-report.md`**: ุชูุฑูุฑ Markdown ุฌุงูุฒ ูููุฑุงุกุฉ ูุนุฑุถ ุงูููุฎุต ูุงูุฌุฏุงูู ุงูุชูุตูููุฉ ููุชุบุทูุฉ.

### ููููุฉ ุฅุนุงุฏุฉ ุชูููุฏ ุงูุชูุงุฑูุฑ

ูู ุฌุฐุฑ ุงููุดุฑูุน:

```bash
# 1) ุชุญุฏูุซ ุฌุฑุฏ ุงูุจุงู ุฅูุฏ
node backend/scripts/generate-endpoint-inventory.js > backend/docs/api/endpoint-inventory.json

# 2) ุชุญุฏูุซ ุงุณุชููุงู ุงููุฑููุช ุฅูุฏ (ูุง ูุชุทูุจ ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ)
node scripts/generate-frontend-usage.js > backend/docs/api/frontend-usage.json

# 3) ูุทุงุจูุฉ ุงูุจุงู ูุน ุงููุฑููุช ูุชูููุฏ ุงูุชูุฑูุฑ
node scripts/map-backend-frontend.js
node scripts/generate-endpoint-report.js
```

## ๐ ุงูุจุฏุก ุงูุณุฑูุน

### 1. ุงุฎุชุจุงุฑ API ุจุงุณุชุฎุฏุงู Postman

1. **ุชุญููู Postman** ูู [getpostman.com](https://www.getpostman.com/downloads/)
2. **ุงุณุชูุฑุงุฏ ุงููุฌููุนุฉ**:
   - ุงูุชุญ Postman
   - ุงุฐูุจ ุฅูู File โ Import
   - ุงุฎุชุฑ `Backend/docs/api/postman_collection.json`
3. **ุฅุนุฏุงุฏ ุงูุจูุฆุฉ**:
   - ูู Postmanุ ุงุฐูุจ ุฅูู Environments
   - ุฃูุดุฆ ุจูุฆุฉ ุฌุฏูุฏุฉ ุจุงุณู "Bthwani API"
   - ุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ:
     ```
     baseUrl = http://localhost:3000
     accessToken = (ุงุชุฑูู ูุงุฑุบูุง ููุขู)
     refreshToken = (ุงุชุฑูู ูุงุฑุบูุง ููุขู)
     userId = (ุงุชุฑูู ูุงุฑุบูุง ููุขู)
     ```

### 2. ุชุดุบูู ุงูุฎุงุฏู ูุญูููุง

```bash
# ูู ูุฌูุฏ Backend
npm run dev
```

### 3. ุงุฎุชุจุงุฑ ุงููุตุงุฏูุฉ

1. ุงุฐูุจ ุฅูู ูุฌูุฏ "Authentication" ูู Postman
2. ุดุบูู ุทูุจ "Register" ูุฅูุดุงุก ุญุณุงุจ ุงุฎุชุจุงุฑ
3. ุดุบูู ุทูุจ "Login" ููุญุตูู ุนูู tokens
4. ุงุณุชุฎุฏู ุงูู accessToken ูู ุงูุทูุจุงุช ุงูุชุงููุฉ

## ๐ ูุฌููุนุฉ API ุงููุชุงุญุฉ

### ๐ก๏ธ ุงููุตุงุฏูุฉ (Authentication)
- `POST /api/v1/auth/login` - ุชุณุฌูู ุงูุฏุฎูู
- `POST /api/v1/auth/register` - ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
- `POST /api/v1/auth/refresh` - ุชุฌุฏูุฏ ุงูุชููู
- `POST /api/v1/auth/logout` - ุชุณุฌูู ุงูุฎุฑูุฌ

### ๐ฆ ุงูุทูุจุงุช (Orders)
- `POST /api/v1/delivery/order` - ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
- `GET /api/v1/delivery/order` - ูุงุฆูุฉ ุงูุทูุจุงุช (ูุน ููุชุฑุฉ)
- `GET /api/v1/delivery/order/{id}` - ุชูุงุตูู ุทูุจ ูุญุฏุฏ
- `PATCH /api/v1/delivery/order/{id}/status` - ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ

### ๐ฐ ุงููุญูุธุฉ (Wallet)
- `GET /api/v1/wallet/balance` - ุนุฑุถ ุฑุตูุฏ ุงููุญูุธุฉ
- `POST /api/v1/wallet/topup` - ุดุญู ุงููุญูุธุฉ
- `POST /api/v1/wallet/withdrawal` - ุทูุจ ุณุญุจ

### ๐ช ุงููุชุงุฌุฑ (Vendors & Stores)
- `GET /api/v1/delivery/stores/search` - ุงูุจุญุซ ูู ุงููุชุงุฌุฑ
- `GET /api/v1/delivery/stores/{id}` - ุชูุงุตูู ูุชุฌุฑ ูุญุฏุฏ
- `GET /api/v1/delivery/stores/{id}/products` - ููุชุฌุงุช ุงููุชุฌุฑ

### ๐ ุงูุณุงุฆููู (Drivers)
- `GET /api/v1/admin/drivers` - ูุงุฆูุฉ ุงูุณุงุฆููู
- `POST /api/v1/admin/drivers/assign` - ุชุนููู ุณุงุฆู ููุทูุจ
- `GET /api/v1/admin/drivers/{id}/performance` - ุฃุฏุงุก ุงูุณุงุฆู

### ๐ ุงููุญุงุณุจุฉ (Accounting)
- `GET /api/v1/er/chart-accounts` - ุฏููู ุงูุญุณุงุจุงุช
- `POST /api/v1/er/journal-entries` - ุฅูุดุงุก ููุฏ ูุญุงุณุจู
- `GET /api/v1/er/journal-entries` - ูุงุฆูุฉ ุงููููุฏ
- `GET /api/v1/er/reports/financial` - ุงูุชูุงุฑูุฑ ุงููุงููุฉ

### โ๏ธ ููุญุฉ ุงูุฅุฏุงุฑุฉ (Admin Dashboard)
- `GET /api/v1/admin/dashboard/overview` - ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู
- `GET /api/v1/admin/settings` - ุฅุนุฏุงุฏุงุช ุงููุธุงู
- `PATCH /api/v1/admin/settings` - ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช

## ๐บ๏ธ ููู ุนูุงูุงุช ุงูุจูุงูุงุช

### ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุงูุชุญ `data-map.mermaid.md` ูู ูุญุฑุฑ ูุฏุนู Mermaid ุฃู ุงุณุชุฎุฏู:
- [Mermaid Live Editor](https://mermaid.live/)
- [GitHub](https://github.com) (ูุฏุนู Mermaid ุชููุงุฆููุง)

### ุงูููุงูุงุช ุงูุฑุฆูุณูุฉ

#### ๐ค ุงููุณุชุฎุฏููู (Users)
- **User**: ุจูุงูุงุช ุงููุณุชุฎุฏููู ุงูุฃุณุงุณูุฉ
- **Wallet**: ูุญุงูุธ ุงููุณุชุฎุฏููู ุงููุงููุฉ
- **Address**: ุนูุงููู ุงููุณุชุฎุฏููู
- **Favorite**: ุงูููุชุฌุงุช ุงูููุถูุฉ

#### ๐ฆ ุงูุทูุจุงุช (Orders)
- **Order**: ุงูุทูุจุงุช ุงูุฑุฆูุณูุฉ
- **OrderItem**: ุนูุงุตุฑ ุงูุทูุจุงุช
- **OrderStatus**: ุณุฌู ุญุงูุงุช ุงูุทูุจุงุช

#### ๐ช ุงููุชุงุฌุฑ (Stores)
- **DeliveryStore**: ุงููุชุงุฌุฑ ูุงููุทุงุนู
- **DeliveryProduct**: ููุชุฌุงุช ุงูุชูุตูู
- **Category**: ูุฆุงุช ุงูููุชุฌุงุช

#### ๐ ุงูุณุงุฆููู (Drivers)
- **Driver**: ุจูุงูุงุช ุงูุณุงุฆููู
- **DriverLocation**: ููุงูุน ุงูุณุงุฆููู
- **DriverShift**: ูุฑุฏูุงุช ุงูุณุงุฆููู

#### ๐ฐ ุงููุญุงุณุจุฉ (Accounting)
- **ChartAccount**: ุฏููู ุงูุญุณุงุจุงุช
- **JournalEntry**: ูููุฏ ุงูููููุฉ
- **LedgerEntry**: ุณุฌูุงุช ุงูุฃุณุชุงุฐ

## ๐งช ุงุฎุชุจุงุฑ API

### ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช ุนูู ุงูุจูุฆุงุช ุงููุฎุชููุฉ

#### ุงูุจูุฆุฉ ุงููุญููุฉ (Local)
```bash
# ุชุดุบูู ุงูุฎุงุฏู ูุญูููุง
cd Backend
npm run dev

# ูู Postmanุ ุงุณุชุฎุฏู:
baseUrl = http://localhost:3000
```

#### ุงูุจูุฆุฉ ุงูุชุฌุฑูุจูุฉ (Staging)
```bash
# ูู Postmanุ ุงุณุชุฎุฏู:
baseUrl = https://bthwani-backend-staging.onrender.com
```

#### ุงูุจูุฆุฉ ุงูุฅูุชุงุฌูุฉ (Production)
```bash
# ูู Postmanุ ุงุณุชุฎุฏู:
baseUrl = https://api.yourdomain.com
```

### ุงูุญุตูู ุนูู ุชููู ุงููุตุงุฏูุฉ

1. ุดุบูู ุทูุจ "Register" ูุฅูุดุงุก ุญุณุงุจ ุงุฎุชุจุงุฑ
2. ุดุบูู ุทูุจ "Login" ููุญุตูู ุนูู ุงูุชููู
3. ุงูุณุฎ `accessToken` ูู ุงูุฑุฏ
4. ุฃุถู ุงูุชููู ุฅูู ูุชุบูุฑ ุงูุจูุฆุฉ ูู Postman

### ุงุฎุชุจุงุฑ ูุณุงุฑ ูุญูู

```bash
# ูุซุงู: ุฌูุจ ูุงุฆูุฉ ุงูุทูุจุงุช
GET {{baseUrl}}/api/v1/delivery/order?user={{userId}}
Headers:
  Authorization: Bearer {{accessToken}}
```

## ๐ ูุฑุงูุจุฉ ุงูุฃุฏุงุก

### ุงุณุชุฎุฏุงู Postman ูููุฑุงูุจุฉ

1. ุดุบูู ูุฌููุนุฉ ูู ุงูุทูุจุงุช ูููุงุณ ุงูุฃุฏุงุก
2. ุงุณุชุฎุฏู Postman Console ููุฑุงูุจุฉ ุงูุทูุจุงุช
3. ุฑุงูุจ ุฃููุงุช ุงูุงุณุชุฌุงุจุฉ ูุงูุฃุฎุทุงุก

### ูุคุดุฑุงุช ุงูุฃุฏุงุก ุงููููุฉ

- **Response Time**: ูุฌุจ ุฃู ูููู < 500ms ููุทูุจุงุช ุงูุจุณูุทุฉ
- **Status Codes**: ูุฌุจ ุฃู ุชููู 2xx ูููุฌุงุญ
- **Error Rates**: ูุฌุจ ุฃู ุชููู < 1% ูู ุงูุฅูุชุงุฌ

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฃุฎุทุงุก ุดุงุฆุนุฉ ูุญููููุง

#### ุฎุทุฃ 401 Unauthorized
```
{
  "error": {
    "code": "INVALID_TOKEN",
    "message": "Invalid access token"
  }
}
```
**ุงูุญู**: ุชุฌุฏูุฏ ุงูุชููู ุจุงุณุชุฎุฏุงู refresh token ุฃู ุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู

#### ุฎุทุฃ 404 Not Found
```
{
  "error": {
    "code": "RESOURCE_NOT_FOUND",
    "message": "The requested resource was not found"
  }
}
```
**ุงูุญู**: ุงูุชุญูู ูู ุตุญุฉ ุงููุณุงุฑ ููุนุฑู ุงูููุฑุฏ

#### ุฎุทุฃ 422 Validation Error
```
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid input data",
    "details": [...]
  }
}
```
**ุงูุญู**: ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุงููุฑุณูุฉ ุญุณุจ API documentation

### ุชุณุฌูู ุงูุฃุฎุทุงุก

ุฌููุน ุงูุฃุฎุทุงุก ุชูุณุฌู ูู:
- **Console Logs**: ูู ุงูุฎุงุฏู ุงููุญูู
- **Render Logs**: ูู ุงูุจูุฆุงุช ุงูุณุญุงุจูุฉ
- **Sentry**: ููุฃุฎุทุงุก ูู ุงูุฅูุชุงุฌ

## ๐ ุฅุถุงูุฉ ูุณุงุฑุงุช ุฌุฏูุฏุฉ

### ุฎุทูุงุช ุฅุถุงูุฉ ูุณุงุฑ ุฌุฏูุฏ ุฅูู ุงููุฌููุนุฉ

1. **ุฅูุดุงุก ุงูู Controller** ูู `Backend/src/controllers/`
2. **ุฅุถุงูุฉ ุงูู Route** ูู `Backend/src/routes/`
3. **ุชูุซูู ุงููุณุงุฑ** ูู Swagger
4. **ุฅุถุงูุฉ ุงูุทูุจ** ุฅูู Postman Collection
5. **ุชุญุฏูุซ ูุฎุทุท ุงูุจูุงูุงุช** ุฅุฐุง ูุฒู ุงูุฃูุฑ

### ูุซุงู ุฅุถุงูุฉ ูุณุงุฑ ุฌุฏูุฏ

```javascript
// 1. ูู Controller
export const getUserProfile = async (req, res) => {
  // ููุทู ุงูุฏุงูุฉ
};

// 2. ูู Route
router.get('/profile', authMiddleware, getUserProfile);

// 3. ูู Postman Collection
{
  "name": "Get User Profile",
  "request": {
    "method": "GET",
    "url": "{{baseUrl}}/api/v1/users/profile",
    "header": [
      {
        "key": "Authorization",
        "value": "Bearer {{accessToken}}"
      }
    ]
  }
}
```

## ๐ ุชุตุฏูุฑ ุงูุชูุซูู ุงูุขูู

### ุชุดุบูู ุณูุฑูุจุช ุงูุชุตุฏูุฑ

```bash
# ุชุตุฏูุฑ ุฌููุน ุงูุชูุซูู
npm run docs:export

# ุงููุชูุฌุฉ ูู ูุฌูุฏ docs/api/exports/
```

### ูุง ูุชู ุชุตุฏูุฑู

- **swagger.json**: ููุงุตูุงุช OpenAPI ุฅุฐุง ูุงู ุงูุฎุงุฏู ูุนูู
- **postman_collection.json**: ูุณุฎุฉ ูุญุฏุซุฉ ูู ุงููุฌููุนุฉ
- **collection-summary.json**: ููุฎุต ุฅุญุตุงุฆูุงุช ุงููุฌููุนุฉ
- **data-relationships.mermaid.md**: ูุฎุทุท ุนูุงูุงุช ุงูุจูุงูุงุช
- **schema-overview.json**: ูุธุฑุฉ ุนุงูุฉ ุนูู ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐๏ธ ุฃุฏูุงุช ูููุฏุฉ ููุชุทููุฑ

### ุงุฎุชุจุงุฑ API
- **Postman**: ููุงุฎุชุจุงุฑ ุงููุฏูู ูุงูุขูู
- **Insomnia**: ุจุฏูู ูุฌุงูู ูู Postman
- **curl**: ููุงุฎุชุจุงุฑ ูู ุณุทุฑ ุงูุฃูุงูุฑ

### ุชูุซูู API
- **Swagger UI**: ูุชุตูุญ API documentation
- **Redoc**: ุจุฏูู ูู Swagger UI
- **Stoplight**: ุฃุฏูุงุช ุดุงููุฉ ูุชูุซูู API

### ูุฑุงูุจุฉ ุงูุฃุฏุงุก
- **Postman Monitors**: ูุฑุงูุจุฉ API uptime
- **New Relic**: ูุฑุงูุจุฉ ุดุงููุฉ ููุฃุฏุงุก
- **DataDog**: ูุฑุงูุจุฉ ุงูุจููุฉ ุงูุชุญุชูุฉ

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

### ูุฑูู ุงูุชุทููุฑ
- **Backend Team**: [ุงูุจุฑูุฏ ุงูุฅููุชุฑููู]
- **DevOps Team**: [ุงูุจุฑูุฏ ุงูุฅููุชุฑููู]
- **Product Team**: [ุงูุจุฑูุฏ ุงูุฅููุชุฑููู]

### ููุงุฑุฏ ุฅุถุงููุฉ
- **API Guidelines**: [ุฑุงุจุท ุงูุฏููู]
- **Code Standards**: [ุฑุงุจุท ูุนุงููุฑ ุงูููุฏ]
- **Security Best Practices**: [ุฑุงุจุท ููุงุฑุณุงุช ุงูุฃูุงู]

---

## ๐ ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ
ุฃูุชูุจุฑ 2025

## ๐ ุฅุตุฏุงุฑ ุงูุชูุซูู
v1.0.0

---

*ูุฐุง ุงูุชูุซูู ุฌุฒุก ูู ูุดุฑูุน Bthwani ูููุญุฏุซ ุจุงูุชุธุงู ูุถูุงู ุฏูุฉ ุงููุนูููุงุช.*
