# أدلة التشغيل (Runbooks) لمشروع Bthwani

## نظرة عامة
تم إنشاء مجموعة شاملة من أدلة التشغيل لجميع أجزاء مشروع Bthwani لضمان التشغيل السلس والصيانة الفعالة.

## هيكل أدلة التشغيل

### Backend (الخلفية)
**الموقع**: `Backend/ops/runbooks/`
- `RUNBOOK_local.md` - تشغيل محلي وتطوير
- `RUNBOOK_staging.md` - بيئة التجريب والنشر
- `RUNBOOK_prod.md` - بيئة الإنتاج والمراقبة

### Admin Dashboard (لوحة الإدارة)
**الموقع**: `admin-dashboard/ops/runbooks/`
- `RUNBOOK_local.md` - تشغيل محلي وتطوير
- `RUNBOOK_staging.md` - بيئة التجريب والنشر
- `RUNBOOK_prod.md` - بيئة الإنتاج والمراقبة

### Web App (موقع الويب)
**الموقع**: `bthwani-web/ops/runbooks/`
- `RUNBOOK_local.md` - تشغيل محلي وتطوير
- `RUNBOOK_staging.md` - بيئة التجريب والنشر
- `RUNBOOK_prod.md` - بيئة الإنتاج والمراقبة

### bThwaniApp (التطبيق الرئيسي)
**الموقع**: `bThwaniApp/ops/runbooks/`
- `RUNBOOK_local.md` - تشغيل محلي وتطوير
- `RUNBOOK_staging.md` - بناء ونشر تجريبي
- `RUNBOOK_prod.md` - بناء ونشر إنتاجي

### Rider App (تطبيق السائقين)
**الموقع**: `rider-app/ops/runbooks/`
- `RUNBOOK_local.md` - تشغيل محلي وتطوير

### Vendor App (تطبيق التجار)
**الموقع**: `vendor-app/ops/runbooks/`
- `RUNBOOK_local.md` - تشغيل محلي وتطوير

### Field Marketers App (تطبيق المندوبين)
**الموقع**: `field-marketers/ops/runbooks/`
- `RUNBOOK_local.md` - تشغيل محلي وتطوير

## أنواع أدلة التشغيل

### 1. RUNBOOK_local.md (التشغيل المحلي)
يحتوي على:
- متطلبات النظام والتبعيات
- خطوات الإعداد والتثبيت
- متغيرات البيئة المطلوبة
- أوامر التشغيل والاختبار
- استكشاف الأخطاء الشائعة
- نصائح للتطوير الفعال

### 2. RUNBOOK_staging.md (البيئة التجريبية)
يحتوي على:
- متغيرات البيئة للتجريب
- خطوات النشر والتوزيع
- أدوات المراقبة والتنبيهات
- اختبارات شاملة قبل الإنتاج
- خطط الرجوع والاستعادة

### 3. RUNBOOK_prod.md (البيئة الإنتاجية)
يحتوي على:
- متغيرات البيئة الإنتاجية
- روابط المراقبة والتنبيهات
- جداول الصيانة والمراقبة
- إجراءات الطوارئ والأمان
- متطلبات الامتثال والقوانين

## متغيرات البيئة الرئيسية لكل جزء

### Backend متغيرات مهمة:
- `MONGO_URI` - رابط قاعدة البيانات
- `REDIS_URL` - رابط Redis
- `JWT_SECRET` - مفتاح JWT للأمان
- `FIREBASE_*` - مفاتيح Firebase
- `SMTP_*` - إعدادات البريد الإلكتروني

### Frontend متغيرات مهمة:
- `VITE_API_URL` - رابط API الخلفية
- `VITE_FIREBASE_*` - مفاتيح Firebase
- `VITE_GOOGLE_MAPS_API_KEY` - مفتاح خرائط Google

### Mobile App متغيرات مهمة:
- `EXPO_PUBLIC_API_URL` - رابط API الخلفية
- `EXPO_PUBLIC_FIREBASE_*` - مفاتيح Firebase
- `EXPO_PUBLIC_GOOGLE_MAPS_API_KEY` - مفتاح خرائط Google

## أدوات المراقبة والنشر المستخدمة

### Backend:
- **Render** للاستضافة السحابية
- **MongoDB Atlas** لقاعدة البيانات
- **Redis Cloud** للتخزين المؤقت

### Frontend:
- **Render** للاستضافة السحابية
- **Firebase Hosting** للاستضافة البديلة
- **Vercel** خيار إضافي للنشر

### Mobile Apps:
- **EAS (Expo Application Services)** للبناء والنشر
- **TestFlight** لاختبار iOS
- **Google Play Internal Testing** لاختبار Android

## جداول الصيانة الموصى بها

### يومية:
- فحص السجلات بحثًا عن أخطاء
- مراقبة استخدام الموارد
- فحص حالة الخدمات

### أسبوعية:
- تحديث التبعيات والمكتبات
- اختبار جميع الوظائف الرئيسية
- مراجعة تعليقات المستخدمين

### شهرية:
- بدل مفاتيح الأمان (rotation)
- مراجعة شاملة للأمان
- تحديث الوثائق والأدلة

## إجراءات الطوارئ

### للخلفية:
1. فحص السجلات في Render Dashboard
2. التحقق من حالة قاعدة البيانات
3. إعادة تشغيل الخدمة إذا لزم الأمر
4. إشعار فريق التطوير

### للواجهات الأمامية:
1. فحص حالة الخدمات في Render
2. التحقق من حالة الـ API
3. إعادة بناء ونشر نسخة مصححة
4. إشعار المستخدمين إذا استمر الانقطاع

### للتطبيقات المحمولة:
1. مراقبة معدل الأعطال في Sentry
2. إصدار تحديث مصحح فورًا
3. إشعار المستخدمين لتحديث التطبيق

## موارد مفيدة إضافية

- **SCREENSHOTS_GUIDE.md** - دليل إنشاء لقطات الشاشة للتشغيل الناجح
- **CONTRACTS_CLOSURE_REPORT.md** - تقرير إغلاق العقود والمشاريع
- **FINAL_SYSTEM_STATUS_REPORT.md** - تقرير الحالة النهائية للنظام

## ملاحظات مهمة

1. **الأمان**: لا تشارك ملفات البيئة أو المفاتيح مع أي شخص خارج الفريق
2. **التحديث**: راجع وحدث هذه الأدلة كل 3 أشهر أو عند تغيير بنية النظام
3. **النسخ الاحتياطي**: احتفظ بنسخة آمنة من هذه الأدلة في نظام إدارة كلمات المرور
4. **التدريب**: استخدم هذه الأدلة لتدريب أعضاء الفريق الجدد
5. **الاختبار**: اختبر هذه الأدلة بانتظام في بيئات مختلفة

## معلومات الاتصال للدعم

### فريق التطوير:
- **DevOps Engineer**: [الاسم] - [البريد الإلكتروني] - [الهاتف]
- **Backend Lead**: [الاسم] - [البريد الإلكتروني] - [الهاتف]
- **Frontend Lead**: [الاسم] - [البريد الإلكتروني] - [الهاتف]
- **Mobile Lead**: [الاسم] - [البريد الإلكتروني] - [الهاتف]

### خدمات خارجية:
- **Render Support**: https://render.com/support
- **MongoDB Atlas Support**: https://support.mongodb.com
- **Redis Cloud Support**: https://redis.com/company/support/
- **Firebase Support**: https://firebase.google.com/support
- **Expo Support**: https://expo.dev/contact
