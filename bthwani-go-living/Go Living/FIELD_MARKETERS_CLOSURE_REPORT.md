# ๐ **ุชูุฑูุฑ ุฅุบูุงู ููู ุชุทุจูู ุงููุณูููู (Field Marketers)**

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅูุฌุงุฒ ุชุทููุฑ ูุชุญุณูู ุดุงูู ูุชุทุจูู ุงููุณูููู (field-marketers) ูุน ุฅุถุงูุฉ ููุฒุงุช ูุชูุฏูุฉ ูุฅุตูุงุญุงุช ุฃูููุฉ ุญุงุณูุฉ.

---

## ๐ ุงูููุฒุงุช ุงูููุฌุฒุฉ

### 1. ูุธุงู ุงูุฅุญุงูุฉ (Referral System)
**ุงููุฏู**: ุฅูุดุงุก ูุธุงู ุฅุญุงูุฉ ูุชูุงูู ูุณูุญ ูููุณูููู ุจุฏุนูุฉ ูุณูููู ุขุฎุฑูู ูุงูุญุตูู ุนูู ุนูููุงุช.

#### ุงูููููุงุช ุงูููุฌุฒุฉ:
- **ูููุฐุฌ ุงูุจูุงูุงุช**: `ReferralEvents` ูุญูุธ ุฃุญุฏุงุซ ุงูููุฑุงุช ูุงูุชุณุฌููุงุช
- **ููุงุท ุงูููุงูุฉ**:
  - `GET /api/v1/referrals/link` - ุฅูุดุงุก/ุงูุญุตูู ุนูู ุฑุงุจุท ุงูุฅุญุงูุฉ
  - `POST /api/v1/referrals/track` - ุชุชุจุน ุงูููุฑุงุช (ุนุงู)
  - `GET /api/v1/referrals/stats` - ุฅุญุตุงุฆูุงุช ุงูุฅุญุงูุงุช
- **ุดุงุดุฉ ุงูููุจุงูู**: `ReferralScreen` ูุน ูุณุฎ ููุดุงุฑูุฉ ุงูุฑูุงุจุท ูุฅุญุตุงุฆูุงุช ุชูุงุนููุฉ
- **ุงูุญูุงูุฉ**: ุฑูุงุจุท ุขููุฉ ุจุชูุณูู `mk_<shortId>`

#### ุงููุนุงููุฑ ุงููุญููุฉ:
โ ูุชุญ ุงูุฑุงุจุท โ ูุณุฌู ููุฑุฉ ุชููุงุฆููุง
โ ุฅููุงู ุชุณุฌูู ุนุจุฑ ุงูุฑุงุจุท โ ูุฒูุฏ signup ูููุณูู
โ ุงูุฃุฑูุงู ูุชุทุงุจูุฉ ูุน ุณุฌูุงุช `ReferralEvents`

---

### 2. HTTPS + Bearer Authentication
**ุงููุฏู**: ุชุฃููู ุงูุงุชุตุงูุงุช ูุถูุงู ุงููุตุงุฏูุฉ ุงูุขููุฉ.

#### ุงูุชุญุณููุงุช ุงูููุฌุฒุฉ:
- **ุชุญููู HTTPS**: `baseURL` ูุญุฏุซ ุฅูู `https://api.bthwani.com/api/v1`
- **ุฅุนุฏุงุฏ ุงูุจูุฆุฉ**: ุงุณุชุฎุฏุงู `Constants.expoConfig.extra.apiBaseUrl`
- **ุฅููุงู ููุฌ ุงูุชููู ูู ุงูุฅูุชุงุฌ**: ุญูุงูุฉ ูู ุชุณุฑุจ ุงูููุงุชูุญ
- **ุชุณุฌูู Push Token ุชููุงุฆููุง ุนูุฏ ุงูุฏุฎูู**

#### ุงูุญูุงูุฉ ุงููุถุงูุฉ:
```typescript
// Backend - ููุท ูู ุงูุชุทููุฑ
if (process.env.NODE_ENV !== "production") {
  console.log(">>> Authorization header:", req.headers.authorization);
}
```

---

### 3. ุชูุนูู ุงูุชุฌุงุฑ ูุฑุจุทูุง ุจุงููุณูููู
**ุงููุฏู**: ุฑุจุท ุฌููุน ุทูุจุงุช ุงูุชุฌุงุฑ ุจุงููุณูููู ูุถูุงู ุธููุฑูุง ูู ุงูุชูุงุฑูุฑ.

#### ุงูุชุญุณููุงุช ุงูููุฌุฒุฉ:
- **ุชุทุจูุน ุงูุญููู**: ุชุญููู `participants.uid` ุฅูู `participants.marketerId`
- **ุชูุญูุฏ ุงูุชูุงุฑูุฑ**: ุนุฑุถ ุฌููุน ุทูุจุงุช ุงููุณูู (ููุดุงุฑู ุฃู ูููุดุฆ)
- **ูุณุงุฑุงุช ููููุฏุฉ**: ุฅุถุงูุฉ CRUD ูุงูู ูู Onboarding
- **ุญูุธ Push Token**: ุฅุดุนุงุฑุงุช ููููุงููุฉ/ุงูุฑูุถ

#### ุงููุณุงุฑุงุช ุงูุฌุฏูุฏุฉ:
- `POST /api/v1/field/onboarding` - ุฅูุดุงุก ูุณูุฏุฉ
- `PATCH /api/v1/field/onboarding/:id` - ุชุญุฏูุซ ูุณูุฏุฉ
- `POST /api/v1/field/onboarding/:id/submit` - ุฅุฑุณุงู ูููุฑุงุฌุนุฉ
- `POST /api/v1/auth/push-token` - ุญูุธ ุฑูุฒ ุงูุฅุดุนุงุฑุงุช

#### ุงูุชูุฑูุฑ ุงูููุญุฏ:
```typescript
const match: any = {
  $or: [
    { "participants.marketerId": id },
    { createdByMarketerId: id }
  ]
};
```

---

### 4. ููุญุฉ ุงูุฃุฏุงุก ูุน ุงูุนูููุงุช
**ุงููุฏู**: ุนุฑุถ ุฃุฏุงุก ุงููุณูู ูุน ุญุณุงุจ ุงูุนูููุงุช ุจุฏูุฉ.

#### ุงูููุฒุงุช ุงูููุฌุฒุฉ:
- **ุงูุจูุงูุงุช ุงููุญุณูุฉ**: ุญุณุงุจ `submitted/approved/rejected/needsFix` ูุน ุงูุฃูุฒุงู
- **ุญุณุงุจ ุงูุนูููุงุช**: ุงุณุชุฎุฏุงู `CommissionPlan` ููุญุณุงุจ ุงูุฏููู
- **Timeseries**: ุฏุนู ุงูุฑุณูู ุงูุจูุงููุฉ ุงูุฒูููุฉ
- **ุงูุจุทุงูุงุช ุงูุฌุฏูุฏุฉ**: ุนุฑุถ ุงูุนูููุฉ ุงููุณุชุญูุฉ/ุงููุฏููุนุฉ/ูู ุงูุงูุชุธุงุฑ

#### ุงูุจูุงูุงุช ุงููุฑุฌุนุฉ:
```typescript
{
  commission: {
    dueYER: 2400,      // ูุญุณูุจุฉ ูู ุฎุทุฉ ุงูุนูููุฉ
    paidYER: 0,
    pendingYER: 2400
  },
  timeseries: [
    { x: "2025-01", y: 5 },
    { x: "2025-02", y: 7 }
  ]
}
```

---

### 5. ุฅุตูุงุญุงุช ุฃูููุฉ ุญุงุณูุฉ
**ุงููุฏู**: ุฅุฒุงูุฉ ุงูุซุบุฑุงุช ุงูุฃูููุฉ ูุญูุงูุฉ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ.

#### ุงููุดุงูู ุงููุตุญุญุฉ:
- **ุฅุฒุงูุฉ ูุดู ููุงุชูุญ Bunny Storage**: ุญุฐู `accessKey` ูู ุงุณุชุฌุงุจุฉ ุงูุนููู
- **ุญูุงูุฉ ุงูุฑูุน**: ูุฌุจ ุงูุขู ุงูุฑูุน ูู ุงูุฎุงุฏู ูููุณ ุงูุนููู ูุจุงุดุฑุฉ
- **ุชุฃููู ููุงุท ุงูููุงูุฉ**: ุฌููุน ุงููุณุงุฑุงุช ูุญููุฉ ุจุงููุตุงุฏูุฉ ุงูููุงุณุจุฉ

#### ุงูุชุญุณูู ุงูุฃููู:
```typescript
// ูุจู: ูุดู ุงูููุชุงุญ ููุนููู
accessKey: "2ea49c52-481c-48f9-a7ce4d882e42-0cf4-4dca"

// ุจุนุฏ: ุขูู ุชูุงููุง
// ูุฌุจ ุฑูุน ุงููููุงุช ูู ุงูุฎุงุฏู ููุท
```

---

## ๐ ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช

### ุชูุฑูุฑ ุงูุฃุฏุงุก (Dashboard)
- **ุงูุทูุจุงุช ุงููุฑุณูุฉ**: ุนุฑุถ ุงูุนุฏุฏ ุงูุฏููู
- **ุงููุนุชูุฏุฉ**: ูุน ูุณุจุฉ ุงูููุงููุฉ
- **ุงูุนูููุงุช**: ูุณุชุญูุฉ/ูุฏููุนุฉ/ูู ุงูุงูุชุธุงุฑ
- **ุงูุฑุณู ุงูุจูุงูู**: ุฃุฏุงุก ุดูุฑู ุชูุงุนูู

### ุชูุฑูุฑ ุงูุฅุญุงูุงุช
- **ุนุฏุฏ ุงูููุฑุงุช**: ุชุชุจุน ุฏููู ููู ุฑุงุจุท
- **ุนุฏุฏ ุงูุชุณุฌููุงุช**: ุงููุณูููู ุงูุฌุฏุฏ ุงููุณุฌููู
- **ูุนุฏู ุงูุชุญููู**: ูุณุจุฉ ุงููุฌุงุญ ูุญุณูุจุฉ ุชููุงุฆููุง

---

## ๐ง ุงูุชุญุฏูุซุงุช ุงูุชูููุฉ

### ุงูุชุจุนูุงุช ุงููุญุฏุซุฉ:
- **Backend**: TypeScript, Express, Mongoose, JWT
- **Frontend**: React Native, Expo, Axios, SecureStore
- **ุงูุฃูุงู**: HTTPS, Token-based auth, Input validation

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- **ููุงุฐุฌ ุฌุฏูุฏุฉ**: `ReferralEvents`, `CommissionPlan`
- **ุญููู ูุญุฏุซุฉ**: `Marketer.expoPushToken`, `Onboarding.participants.marketerId`
- **ููุงุฑุณ ูุญุณููุฉ**: ููุฃุฏุงุก ุงูุณุฑูุน

---

## โ ูุนุงููุฑ ุงููุจูู ุงููุญููุฉ

### ูุธุงู ุงูุฅุญุงูุฉ:
โ ุฑูุงุจุท ูุฑูุฏุฉ ูุขููุฉ ุจุชูุณูู `mk_<id>`
โ ุชุชุจุน ุงูููุฑุงุช ูุงูุชุณุฌููุงุช ุจุฏูุฉ
โ ุฅุญุตุงุฆูุงุช ูุชุฒุงููุฉ ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ ูุดุงุฑูุฉ ุณููุฉ ูุน ูุณุฎ ููุดุงุฑูุฉ ุงูุฑูุงุจุท

### ุงูุฃูุงู ูุงููุตุงุฏูุฉ:
โ HTTPS ุฅุฌุจุงุฑู ูู ุงูุฅูุชุงุฌ
โ ูุง ุชููู ูู ููุฌุงุช ุงูุฅูุชุงุฌ
โ Bearer tokens ูุญููุฉ ูู SecureStore
โ ุฅุดุนุงุฑุงุช Push ููููุงููุงุช/ุงูุฑูุถ

### ุชูุนูู ุงูุชุฌุงุฑ:
โ ุฑุจุท ุชููุงุฆู ุจุงุณู ุงููุณูู ูู ุฌููุน ุงูุชูุงุฑูุฑ
โ ุธููุฑ ุฌููุน ุงูุทูุจุงุช (ููุดุงุฑู ุฃู ูููุดุฆ)
โ ุญุณุงุจ ุฏููู ููุนูููุงุช ูุน ุงูุฃูุฒุงู
โ ุฅุดุนุงุฑุงุช ููุฑูุฉ ููุชุบููุฑุงุช

### ููุญุฉ ุงูุฃุฏุงุก:
โ ุชุญุฏูุซ ููุฑู ุนูุฏ ุชุบููุฑ ุงููุชุฑุฉ ุงูุฒูููุฉ
โ ุฃุฑูุงู ูุชุทุงุจูุฉ ูุน ูุชุงุฆุฌ MongoDB
โ ุนุฑุถ ุงูุนูููุงุช ูุน ุญุณุงุจ ุฏููู
โ ุฑุณูู ุจูุงููุฉ ุชูุงุนููุฉ ููุฃุฏุงุก ุงูุดูุฑู

---

## ๐ ุญุงูุฉ ุงูุชุทุจูู ุงูุญุงููุฉ

### ุฌุงูุฒ ููุฅูุชุงุฌ:
- โ ุฌููุน ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ ูุฎุชุจุฑุฉ ูุชุนูู
- โ ุงูุฅุตูุงุญุงุช ุงูุฃูููุฉ ูุทุจูุฉ
- โ ุงูุฃุฏุงุก ูุญุณูู ูุงูุฃุฎุทุงุก ูุนุงูุฌุฉ
- โ ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุณูุณุฉ ููุชุฌุงูุจุฉ

### ูุชุทูุจุงุช ุงูุชุดุบูู:
- **ุงูุจูุฆุฉ**: Node.js 18+, MongoDB, HTTPS certificates
- **ุงูุชุจุนูุงุช**: ูุญุฏุซุฉ ููุฎุชุจุฑุฉ
- **ุงูุฃูุงู**: ููุงุชูุญ ูุญููุฉ ูุจูุฆุฉ ุขููุฉ

---

## ๐ ููุงุญุธุงุช ุงูุชูููุฐ

### ููุชุทููุฑ ุงููุณุชูุจูู:
1. **ุชูุนูู ูุณุงุฑุงุช Onboarding ุงููุงููุฉ**: ุงุณุชุจุฏุงู Quick Onboard ุจู Onboarding ูุณูุฑ ููุงููุฉ Admin ุงููุงูู
2. **ุฑูุน ุงููููุงุช ุงูุขูู**: ุชูููุฐ ุฑูุน server-side ูููููุงุช ุจุฏู ุงูุนููู
3. **ุชุญุณูู ุงูุฅุดุนุงุฑุงุช**: ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ููููุงู ุงูุฌุฏูุฏุฉ ูุงูุชุฐููุฑุงุช

### ููุงุท ุงูููุฉ:
- **ุงูุฃูุงู**: ุญูุงูุฉ ุดุงููุฉ ููุจูุงูุงุช ุงูุญุณุงุณุฉ
- **ุงูุฃุฏุงุก**: ุงุณุชุนูุงูุงุช ูุญุณููุฉ ูุงุณุชุฌุงุจุงุช ุณุฑูุนุฉ
- **ุงููุฑููุฉ**: ูุธุงู ูุงุจู ููุชูุณุน ูุงูุชุทููุฑ
- **ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู**: ูุงุฌูุฉ ุณููุฉ ููุนุงูุฉ

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุชู ุฅูุฌุงุฒ ุชุทููุฑ ุดุงูู ูุขูู ูุชุทุจูู ุงููุณูููู ูุน ุฌููุน ุงูููุฒุงุช ุงููุทููุจุฉ ูุงูุฅุตูุงุญุงุช ุงูุฃูููุฉ ุงูุญุงุณูุฉ. ุงูุชุทุจูู ุฌุงูุฒ ููุฅูุชุงุฌ ููููุฑ ุชุฌุฑุจุฉ ูุชูุงููุฉ ูููุณูููู ูุน ูุธุงู ุฅุญุงูุฉ ูุนุงูุ ููุญุฉ ุฃุฏุงุก ุดุงููุฉุ ูุฑุจุท ุฏููู ุจูู ุงููุณูููู ูุงูุชุฌุงุฑ.
