# نظام التقارير والإحصائيات في نظام بثواني

## نظرة عامة على نظام التقارير والإحصائيات

نظام بثواني يحتوي على نظام تقارير وإحصائيات شامل يغطي:

1. **تقارير المبيعات والإيرادات** - تتبع الأداء المالي
2. **تقارير السائقين** - أداء السائقين والتقييمات
3. **تقارير المتاجر** - أداء المتاجر والمبيعات
4. **تقارير العملاء** - سلوك العملاء والطلبات
5. **تقارير النظام** - أداء النظام والأخطاء
6. **تقارير الدعم الفني** - تتبع طلبات الدعم وحلها

النظام يدعم التقارير الزمنية والتصدير إلى Excel والتحليلات المتقدمة.

---

## 1. تدفق تقارير المبيعات والإيرادات (Sales & Revenue Reports)

### الأدوار المشاركة:
- **الإدارة**: مراجعة التقارير المالية والإيرادات
- **المالية**: تحليل الأرباح والخسائر
- **التاجر**: مراجعة مبيعاته الخاصة
- **النظام**: جمع البيانات وحساب المؤشرات

### Workflow Diagram - مخطط التدفق

```mermaid
graph TD
    A[طلب تقرير المبيعات] --> B[تحديد الفترة الزمنية]
    B --> C[تحديد المعايير (متجر/منطقة/فئة)]

    C --> D[جمع بيانات الطلبات من قاعدة البيانات]
    D --> E[حساب الإيرادات والعمولات]

    E --> F[تجميع البيانات حسب الفترة]
    F --> G[حساب المؤشرات الرئيسية]

    G --> H[تطبيق الفلاتر والتصنيف]
    H --> I[إعداد البيانات للعرض]

    I --> J[عرض التقرير في لوحة الإدارة]
    J --> K[إمكانية تصدير التقرير]

    K --> L{اختيار تنسيق التصدير}
    L -->|Excel| M[تصدير إلى ملف Excel]
    L -->|PDF| N[تصدير إلى ملف PDF]

    M --> O[تحميل الملف المُصدّر]
    N --> O

    style A fill:#e1f5fe
    style O fill:#c8e6c9
    style L fill:#ffcdd2
```

### Sequence Diagram - مخطط التسلسل

```mermaid
sequenceDiagram
    participant A as المدير/المالية
    participant AD as لوحة الإدارة
    participant B as الخادم الخلفي
    participant DB as قاعدة البيانات
    participant FS as خدمة التقارير المالية
    participant EX as خدمة التصدير

    A->>AD: طلب تقرير المبيعات والإيرادات
    AD->>A: عرض واجهة اختيار المعايير

    A->>AD: تحديد الفترة الزمنية (من تاريخ إلى تاريخ)
    AD->>A: اختيار المعايير (متاجر محددة/مناطق/فئات)

    AD->>B: إرسال طلب التقرير مع المعايير
    B->>B: التحقق من صلاحيات المستخدم للوصول للتقارير

    alt لديه صلاحية الوصول
        B->>DB: جلب بيانات الطلبات حسب المعايير المحددة
        DB-->>B: قائمة الطلبات مع التفاصيل المالية

        B->>FS: حساب إجمالي المبيعات والعمولات
        FS->>DB: جلب بيانات العمولات والضرائب
        DB-->>FS: بيانات العمولات

        FS->>FS: حساب GMV وصافي الإيرادات
        Note over FS: GMV = إجمالي المبيعات + رسوم التوصيل
        Note over FS: صافي الإيرادات = GMV - العمولات - الضرائب

        B->>B: تجميع البيانات حسب الفترة والمعايير
        B->>B: حساب المؤشرات الرئيسية (معدل النمو، متوسط الطلب، إلخ)

        B->>AD: إرسال البيانات المُعالجة للعرض
        AD-->>A: عرض التقرير التفاعلي مع الرسوم البيانية

        A->>AD: طلب تصدير التقرير
        AD->>B: طلب تصدير التقرير بتنسيق محدد

        B->>EX: إعداد ملف التصدير (Excel/PDF)
        EX-->>B: ملف التصدير جاهز

        B-->>AD: إرسال رابط تحميل الملف
        AD-->>A: عرض رابط التحميل للمستخدم

    else ليس لديه صلاحية الوصول
        B-->>AD: رسالة خطأ - غير مصرح للوصول للتقارير المالية
        AD-->>A: عرض رسالة عدم الصلاحية
    end
```

---

## 2. تدفق تقارير أداء السائقين (Driver Performance Reports)

### الأدوار المشاركة:
- **الإدارة**: مراجعة أداء السائقين واتخاذ القرارات
- **السائق**: مراجعة أدائه الخاص وتحسينه
- **النظام**: جمع البيانات وحساب المؤشرات

### Workflow Diagram - مخطط التدفق

```mermaid
graph TD
    A[طلب تقرير أداء السائقين] --> B[تحديد الفترة والسائقين]
    B --> C[جمع بيانات الطلبات للسائقين]

    C --> D[حساب مؤشرات الأداء لكل سائق]
    D --> E[تحديد السائقين الأفضل والأسوأ أداءً]

    E --> F[إنشاء تقرير مقارن بين السائقين]
    F --> G[حساب متوسطات الأداء العامة]

    G --> H[عرض التقرير مع الرسوم البيانية]
    H --> I[إمكانية تصدير التقرير]

    I --> J{اختيار تنسيق التصدير}
    J -->|Excel| K[تصدير إلى Excel]
    J -->|PDF| L[تصدير إلى PDF]

    K --> M[تحميل الملف]
    L --> M

    style A fill:#e1f5fe
    style M fill:#c8e6c9
    style J fill:#ffcdd2
```

### Sequence Diagram - مخطط التسلسل

```mermaid
sequenceDiagram
    participant A as المدير
    participant AD as لوحة الإدارة
    participant B as الخادم الخلفي
    participant DB as قاعدة البيانات
    participant DS as خدمة السائقين
    participant OS as خدمة الطلبات
    participant PS as خدمة الأداء

    A->>AD: طلب تقرير أداء السائقين
    AD->>A: عرض واجهة اختيار السائقين والفترة

    A->>AD: تحديد السائقين المطلوبين والفترة الزمنية
    AD->>B: إرسال طلب التقرير

    B->>B: التحقق من صلاحيات المستخدم
    alt لديه صلاحية الوصول
        B->>OS: جلب جميع الطلبات في الفترة المحددة
        OS->>DB: استعلام عن الطلبات حسب الفترة
        DB-->>OS: قائمة الطلبات

        B->>DS: ربط كل طلب بسائقه المسؤول
        DS->>DB: جلب بيانات السائقين
        DB-->>DS: بيانات السائقين

        B->>PS: حساب مؤشرات الأداء لكل سائق
        Note over PS: حساب معدل التقييم، عدد الطلبات، متوسط وقت التسليم، معدل الإلغاء

        PS->>DB: جلب تقييمات السائقين
        DB-->>PS: قائمة التقييمات

        PS->>PS: حساب متوسط التقييم لكل سائق
        PS->>PS: حساب متوسط وقت التسليم
        PS->>PS: حساب معدل إنجاز الطلبات

        B->>B: ترتيب السائقين حسب الأداء
        B->>B: تحديد أفضل وأسوأ السائقين أداءً

        B->>AD: إرسال التقرير المُعالج
        AD-->>A: عرض التقرير مع الرسوم البيانية والمقارنات

        A->>AD: طلب تصدير التقرير
        AD->>B: طلب تصدير التقرير

        B->>EX: إعداد ملف Excel مع الجداول والرسوم البيانية
        EX-->>B: ملف التصدير جاهز

        B-->>AD: إرسال رابط التحميل
        AD-->>A: عرض رابط التحميل

    else ليس لديه صلاحية الوصول
        B-->>AD: رسالة خطأ - غير مصرح للوصول لتقارير السائقين
        AD-->>A: عرض رسالة عدم الصلاحية
    end
```

---

## 3. تدفق تقارير أداء المتاجر (Store Performance Reports)

### الأدوار المشاركة:
- **الإدارة**: مراجعة أداء المتاجر واتخاذ القرارات
- **التاجر**: مراجعة أدائه الخاص وتحسينه
- **النظام**: جمع البيانات وحساب المؤشرات

### Workflow Diagram - مخطط التدفق

```mermaid
graph TD
    A[طلب تقرير أداء المتاجر] --> B[تحديد الفترة والمتاجر]
    B --> C[جمع بيانات الطلبات للمتاجر]

    C --> D[حساب مؤشرات الأداء لكل متجر]
    D --> E[تحليل أداء المنتجات والفئات]

    E --> F[حساب معدل التقييم والرضا]
    F --> G[تحديد المتاجر الأكثر والأقل أداءً]

    G --> H[إنشاء تقرير مقارن]
    H --> I[عرض التقرير مع التحليلات]

    I --> J[إمكانية تصدير التقرير]

    style A fill:#e1f5fe
    style J fill:#c8e6c9
```

### Sequence Diagram - مخطط التسلسل

```mermaid
sequenceDiagram
    participant A as المدير/التاجر
    participant AD as لوحة الإدارة/التاجر
    participant B as الخادم الخلفي
    participant DB as قاعدة البيانات
    participant SS as خدمة المتاجر
    participant OS as خدمة الطلبات
    participant PS as خدمة الأداء

    A->>AD: طلب تقرير أداء المتاجر
    AD->>A: عرض واجهة اختيار المتاجر والفترة

    A->>AD: تحديد المتاجر والفترة الزمنية
    AD->>B: إرسال طلب التقرير

    B->>B: التحقق من صلاحيات المستخدم
    alt لديه صلاحية الوصول
        B->>OS: جلب جميع الطلبات للمتاجر المحددة
        OS->>DB: استعلام عن الطلبات حسب المتاجر والفترة
        DB-->>OS: قائمة الطلبات

        B->>SS: ربط كل طلب بمتجره
        SS->>DB: جلب بيانات المتاجر
        DB-->>SS: بيانات المتاجر

        B->>PS: حساب مؤشرات الأداء لكل متجر
        Note over PS: حساب عدد الطلبات، إجمالي المبيعات، متوسط التقييم، معدل الإلغاء

        PS->>DB: جلب تقييمات المتاجر
        DB-->>PS: قائمة تقييمات المتاجر

        PS->>PS: حساب متوسط التقييم لكل متجر
        PS->>PS: تحليل أداء المنتجات الأكثر مبيعاً
        PS->>PS: حساب معدل رضا العملاء

        B->>B: ترتيب المتاجر حسب الأداء
        B->>B: تحديد أفضل وأسوأ المتاجر أداءً

        B->>AD: إرسال التقرير المُعالج
        AD-->>A: عرض التقرير مع التحليلات والمقارنات

        A->>AD: طلب تصدير التقرير
        AD->>B: طلب تصدير التقرير

        B->>EX: إعداد ملف Excel مع الجداول والتحليلات
        EX-->>B: ملف التصدير جاهز

        B-->>AD: إرسال رابط التحميل
        AD-->>A: عرض رابط التحميل

    else ليس لديه صلاحية الوصول
        B-->>AD: رسالة خطأ - غير مصرح للوصول لتقارير المتاجر
        AD-->>A: عرض رسالة عدم الصلاحية
    end
```

---

## 4. تدفق تقارير العملاء (Customer Analytics Reports)

### الأدوار المشاركة:
- **الإدارة**: تحليل سلوك العملاء والاتجاهات
- **التسويق**: فهم احتياجات العملاء وتحسين الحملات
- **النظام**: جمع البيانات وتحليل الأنماط

### Workflow Diagram - مخطط التدفق

```mermaid
graph TD
    A[طلب تقرير تحليلات العملاء] --> B[تحديد نوع التحليل]
    B --> C{نوع التحليل}

    C -->|سلوك الطلب| D[تحليل أنماط الطلبات]
    C -->|تفضيلات المنتجات| E[تحليل المنتجات الأكثر طلباً]
    C -->|القيمة الزمنية| F[تحليل قيمة العميل الزمنية]

    D --> G[جمع بيانات الطلبات للعملاء]
    E --> H[تحليل تفضيلات المنتجات والفئات]
    F --> I[حساب CLV للعملاء]

    G --> J[تحديد أنماط الاستهلاك]
    H --> K[تحديد المنتجات الشائعة]
    I --> L[تصنيف العملاء حسب القيمة]

    J --> M[إنشاء تقرير السلوك]
    K --> N[إنشاء تقرير التفضيلات]
    L --> O[إنشاء تقرير CLV]

    M --> P[عرض التقرير مع التحليلات]
    N --> P
    O --> P

    P --> Q[إمكانية تصدير التقرير]

    style A fill:#e1f5fe
    style Q fill:#c8e6c9
    style C fill:#ffcdd2
```

### Sequence Diagram - مخطط التسلسل

```mermaid
sequenceDiagram
    participant A as المدير/التسويق
    participant AD as لوحة الإدارة
    participant B as الخادم الخلفي
    participant DB as قاعدة البيانات
    participant CS as خدمة العملاء
    participant OS as خدمة الطلبات
    participant AS as خدمة التحليلات

    A->>AD: طلب تقرير تحليلات العملاء
    AD->>A: عرض واجهة اختيار نوع التحليل

    A->>AD: اختيار نوع التحليل (سلوك/تفضيلات/CLV)
    AD->>B: إرسال طلب التقرير

    B->>B: التحقق من صلاحيات المستخدم
    alt لديه صلاحية الوصول
        B->>CS: جلب بيانات العملاء حسب المعايير
        CS->>DB: استعلام عن بيانات العملاء
        DB-->>CS: بيانات العملاء

        B->>OS: جلب تاريخ طلبات العملاء
        OS->>DB: استعلام عن تاريخ الطلبات
        DB-->>OS: تاريخ طلبات العملاء

        B->>AS: تحليل سلوك العملاء حسب النوع المختار
        Note over AS: تحليل أنماط الطلبات، تفضيلات المنتجات، حساب CLV

        AS->>AS: حساب مؤشرات الأداء لكل عميل
        AS->>AS: تصنيف العملاء حسب القيمة والنشاط

        B->>B: إعداد التقرير مع التحليلات والرسوم البيانية
        B->>AD: إرسال التقرير المُعالج
        AD-->>A: عرض التقرير مع التحليلات التفاعلية

        A->>AD: طلب تصدير التقرير
        AD->>B: طلب تصدير التقرير

        B->>EX: إعداد ملف Excel مع التحليلات
        EX-->>B: ملف التصدير جاهز

        B-->>AD: إرسال رابط التحميل
        AD-->>A: عرض رابط التحميل

    else ليس لديه صلاحية الوصول
        B-->>AD: رسالة خطأ - غير مصرح للوصول لتقارير العملاء
        AD-->>A: عرض رسالة عدم الصلاحية
    end
```

---

## 5. تدفق تقارير النظام والأداء (System Performance Reports)

### الأدوار المشاركة:
- **الإدارة**: مراقبة أداء النظام واتخاذ القرارات
- **المطورين**: تحليل الأخطاء وتحسين الأداء
- **النظام**: جمع البيانات ومراقبة الأداء

### Workflow Diagram - مخطط التدفق

```mermaid
graph TD
    A[طلب تقرير أداء النظام] --> B[جمع بيانات الأداء]
    B --> C[تحليل وقت الاستجابة]

    C --> D[تحليل معدل الأخطاء]
    D --> E[تحليل استخدام الموارد]

    E --> F[تحليل حالة الخدمات]
    F --> G[حساب مؤشرات الأداء الرئيسية]

    G --> H[تحديد المشاكل والاختناقات]
    H --> I[إنشاء تقرير الأداء]

    I --> J[عرض التقرير مع التنبيهات]
    J --> K[إرسال تنبيهات للمشاكل الحرجة]

    style A fill:#e1f5fe
    style K fill:#c8e6c9
    style H fill:#ffcdd2
```

### Sequence Diagram - مخطط التسلسل

```mermaid
sequenceDiagram
    participant A as المدير/المطور
    participant AD as لوحة الإدارة
    participant B as الخادم الخلفي
    participant DB as قاعدة البيانات
    participant MS as خدمة مراقبة النظام
    participant LS as خدمة السجلات
    participant NS as خدمة الإشعارات

    A->>AD: طلب تقرير أداء النظام
    AD->>A: عرض واجهة اختيار الفترة والمعايير

    A->>AD: تحديد الفترة والخدمات المطلوب مراقبتها
    AD->>B: إرسال طلب التقرير

    B->>B: التحقق من صلاحيات المستخدم
    alt لديه صلاحية الوصول
        B->>MS: جلب بيانات مراقبة النظام
        MS->>DB: استعلام عن بيانات الأداء
        DB-->>MS: بيانات مراقبة النظام

        B->>LS: جلب سجلات الأخطاء والأحداث
        LS->>DB: استعلام عن السجلات
        DB-->>LS: سجلات النظام

        B->>MS: تحليل وقت الاستجابة للخدمات
        MS->>MS: حساب متوسط وقت الاستجابة
        MS->>MS: تحديد الخدمات البطيئة

        B->>LS: تحليل معدل الأخطاء حسب النوع
        LS->>LS: تصنيف الأخطاء حسب الخطورة
        LS->>LS: تحديد الأخطاء المتكررة

        B->>MS: تحليل استخدام الموارد (CPU، ذاكرة، قرص)
        MS->>MS: حساب معدلات الاستخدام
        MS->>MS: تحديد الاختناقات

        B->>B: تحديد المشاكل والاختناقات
        B->>B: حساب مؤشرات الأداء الرئيسية

        B->>AD: إرسال التقرير مع التحليلات
        AD-->>A: عرض التقرير مع الرسوم البيانية

        B->>NS: إرسال تنبيهات للمشاكل الحرجة
        NS-->>A: تنبيه فوري للمشاكل المكتشفة

    else ليس لديه صلاحية الوصول
        B-->>AD: رسالة خطأ - غير مصرح للوصول لتقارير النظام
        AD-->>A: عرض رسالة عدم الصلاحية
    end
```

---

## 6. تدفق تقارير الدعم الفني (Support Reports Flow)

### الأدوار المشاركة:
- **الإدارة**: مراجعة أداء الدعم وحل المشاكل
- **فريق الدعم**: تحليل طلبات الدعم وتحسين الخدمة
- **النظام**: جمع البيانات وتحليل الأنماط

### Workflow Diagram - مخطط التدفق

```mermaid
graph TD
    A[طلب تقرير الدعم الفني] --> B[جمع بيانات طلبات الدعم]
    B --> C[تحليل حالة الطلبات]

    C --> D[حساب مؤشرات الأداء]
    D --> E[تحليل أسباب المشاكل الشائعة]

    E --> F[تحديد الاتجاهات والأنماط]
    F --> G[حساب معدل حل المشاكل]

    G --> H[إنشاء تقرير الدعم]
    H --> I[عرض التقرير مع التوصيات]

    I --> J[إمكانية تصدير التقرير]

    style A fill:#e1f5fe
    style J fill:#c8e6c9
```

### Sequence Diagram - مخطط التسلسل

```mermaid
sequenceDiagram
    participant A as المدير/فريق الدعم
    participant AD as لوحة الإدارة
    participant B as الخادم الخلفي
    participant DB as قاعدة البيانات
    participant SS as خدمة الدعم الفني
    participant AS as خدمة التحليلات

    A->>AD: طلب تقرير الدعم الفني
    AD->>A: عرض واجهة اختيار الفترة والمعايير

    A->>AD: تحديد الفترة وأولوية الطلبات
    AD->>B: إرسال طلب التقرير

    B->>B: التحقق من صلاحيات المستخدم
    alt لديه صلاحية الوصول
        B->>SS: جلب جميع طلبات الدعم في الفترة
        SS->>DB: استعلام عن طلبات الدعم
        DB-->>SS: قائمة طلبات الدعم

        B->>SS: تحليل حالة كل طلب (جديد/مفتوح/معلق/محلول/مغلق)
        SS->>SS: تصنيف الطلبات حسب الأولوية والنوع

        B->>AS: حساب مؤشرات الأداء للدعم
        Note over AS: حساب متوسط وقت الحل، معدل الإغلاق، رضا العملاء

        AS->>DB: جلب بيانات تقييم الدعم
        DB-->>AS: تقييمات الدعم

        AS->>AS: تحليل أسباب المشاكل الأكثر شيوعاً
        AS->>AS: تحديد الاتجاهات والأنماط في طلبات الدعم

        B->>B: إعداد التقرير مع التوصيات
        B->>AD: إرسال التقرير المُعالج
        AD-->>A: عرض التقرير مع التحليلات

        A->>AD: طلب تصدير التقرير
        AD->>B: طلب تصدير التقرير

        B->>EX: إعداد ملف Excel مع التفاصيل
        EX-->>B: ملف التصدير جاهز

        B-->>AD: إرسال رابط التحميل
        AD-->>A: عرض رابط التحميل

    else ليس لديه صلاحية الوصول
        B-->>AD: رسالة خطأ - غير مصرح للوصول لتقارير الدعم
        AD-->>A: عرض رسالة عدم الصلاحية
    end
```

---

## مقارنة بين أنواع التقارير في النظام

| نوع التقرير | المستخدمون | البيانات الرئيسية | التحليلات | التكرار |
|-------------|------------|------------------|-----------|---------|
| **تقارير المبيعات** | الإدارة، المالية، التاجر | الإيرادات، العمولات، GMV | تحليل الاتجاهات، المقارنة | يومي/أسبوعي/شهري |
| **تقارير السائقين** | الإدارة، السائق | الأداء، التقييمات، الطلبات | ترتيب الأداء، تحسين الخدمة | أسبوعي/شهري |
| **تقارير المتاجر** | الإدارة، التاجر | المبيعات، التقييمات، الأداء | ترتيب المتاجر، تحسين الجودة | أسبوعي/شهري |
| **تقارير العملاء** | الإدارة، التسويق | السلوك، التفضيلات، CLV | فهم العملاء، تحسين الخدمة | شهري/ربع سنوي |
| **تقارير النظام** | الإدارة، المطورين | الأداء، الأخطاء، الموارد | مراقبة الصحة، تحسين الأداء | يومي/أسبوعي |
| **تقارير الدعم** | الإدارة، فريق الدعم | الطلبات، الأداء، الرضا | تحسين الخدمة، حل المشاكل | أسبوعي/شهري |

---

## البيانات المطلوبة لكل نوع تقرير

### تقرير المبيعات والإيرادات
- **الفترة الزمنية** (من تاريخ إلى تاريخ)
- **المتاجر** (معينة أو الكل)
- **المناطق** (مدن محددة)
- **فئات المنتجات** (grocery/restaurant/retail)
- **طرق الدفع** (نقدي/محفظة/بطاقة)

### تقرير أداء السائقين
- **الفترة الزمنية** (من تاريخ إلى تاريخ)
- **السائقين** (معينين أو الكل)
- **المناطق** (مدن محددة)
- **مؤشرات الأداء** (التقييم، وقت التسليم، معدل الإلغاء)

### تقرير أداء المتاجر
- **الفترة الزمنية** (من تاريخ إلى تاريخ)
- **المتاجر** (معينة أو الكل)
- **الفئات** (grocery/restaurant/retail)
- **مؤشرات الأداء** (المبيعات، التقييمات، معدل الإلغاء)

### تقرير تحليلات العملاء
- **الفترة الزمنية** (من تاريخ إلى تاريخ)
- **شرائح العملاء** (جدد/نشطين/مفقودين)
- **القيمة الزمنية** (CLV)
- **التفضيلات** (المنتجات، الفئات، المتاجر)

---

## آليات الحماية والتحقق

### 1. التحقق من الصلاحيات
- **الإدارة**: صلاحية الوصول لجميع التقارير
- **التاجر**: صلاحية الوصول لتقاريره الخاصة فقط
- **المالية**: صلاحية الوصول للتقارير المالية فقط

### 2. التحقق من صحة البيانات
- **الفترات الزمنية**: التأكد من صحة التواريخ
- **المعايير**: التأكد من صحة المعرفات والمراجع
- **الحسابات**: التأكد من دقة العمليات الحسابية

### 3. أمان البيانات
- **التشفير**: تشفير البيانات المالية الحساسة
- **الخصوصية**: عدم عرض بيانات العملاء الشخصية
- **الامتثال**: الامتثال لقوانين حماية البيانات

### 4. إدارة الأخطاء
- **النسخ الاحتياطي**: حفظ نسخة من التقارير المهمة
- **التسجيل**: تسجيل جميع عمليات الوصول والتصدير
- **المراقبة**: مراقبة استخدام النظام وكشف الشذوذ

---

## قواعد البيانات المستخدمة

- **الطلبات**: جدول `orders` في MongoDB
- **السائقين**: جدول `drivers` في MongoDB
- **المتاجر**: جدول `stores` في MongoDB
- **العملاء**: جدول `users` في MongoDB
- **التقييمات**: جداول `ratings` و `reviews` في MongoDB
- **الدعم الفني**: جدول `support_tickets` في MongoDB

---

## حالات التقرير الممكنة

| الحالة | الوصف | يمكن التصدير | يتطلب مراجعة |
|---------|--------|---------------|----------------|
| **مكتمل** | تقرير تم إعداده بنجاح | ✅ يمكن التصدير | ❌ لا يحتاج |
| **قيد المعالجة** | تقرير يتم إعداده | ❌ لا يمكن التصدير | ❌ لا يحتاج |
| **فاشل** | تقرير فشل في الإعداد | ❌ لا يمكن التصدير | ✅ يحتاج مراجعة |
| **مؤجل** | تقرير في قائمة الانتظار | ❌ لا يمكن التصدير | ❌ لا يحتاج |

---

## مميزات نظام التقارير والإحصائيات المتقدمة

### 1. التقارير التفاعلية
- رسوم بيانية تفاعلية قابلة للتخصيص
- فلاتر ديناميكية للبيانات
- إمكانية التنقل والتكبير في التقارير

### 2. التصدير المتعدد
- تصدير إلى Excel مع التنسيق المناسب
- تصدير إلى PDF للتقارير الرسمية
- تصدير البيانات الأولية للتحليل الخارجي

### 3. التحليلات الذكية
- تحليل الاتجاهات والأنماط
- تنبؤات مبنية على البيانات التاريخية
- اقتراحات لتحسين الأداء

### 4. التقارير التلقائية
- تقارير دورية تلقائية
- إشعارات للتقارير المهمة
- جدولة التقارير حسب الحاجة

### 5. نظام التنبيهات
- تنبيهات للانخفاض في الأداء
- تنبيهات للزيادة في الأخطاء
- تنبيهات للفرص التجارية

هذه المخططات تغطي جميع جوانب نظام التقارير والإحصائيات في نظام بثواني بالتفصيل الكامل.
