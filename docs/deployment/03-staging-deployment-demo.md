# ุชูุซูู ุชุฌุฑุจุฉ ุงููุดุฑ ุนูู Staging - ุฏููู ุนููู

## ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุชุฌุฑุจุฉ

ุชู ุชูููุฐ ุชุฌุฑุจุฉ ูุดุฑ ูุงููุฉ ููุฅุตุฏุงุฑ 2.1.0 ุนูู ุจูุฆุฉ Staging ูู ุชุงุฑูุฎ 10 ููุงูุฑ 2025ุ ุงูุณุงุนุฉ 14:00 UTC+3. ูุฐุง ุงูุชูุซูู ููุถุญ ููููุฉ ุฅูุดุงุก ููุฏูู ูุตูุฑ ุฃู ููุทุงุช ุดุงุดุฉ ูุชูุซูู ุงูุชุฌุฑุจุฉ.

## ุฎุทูุงุช ุฅูุดุงุก ุงูุชูุซูู ุงููุฑุฆู

### 1. ุฅุนุฏุงุฏ ุฃุฏูุงุช ุงูุชุณุฌูู

#### ุฃุฏูุงุช ููุตู ุจูุง:
```bash
# ูุชุณุฌูู ุงูุดุงุดุฉ ุนูู Windows
# - OBS Studio (ูุฌุงูู ูููุชูุญ ุงููุตุฏุฑ)
# - Camtasia (ูุฏููุน ููู ููู)
# - Windows Game Bar (ูุฏูุฌ ูู Windows 10+)

# ูุชุณุฌูู ุงูุดุงุดุฉ ุนูู macOS
# - QuickTime Player (ูุฏูุฌ)
# - OBS Studio
# - ScreenFlow (ูุฏููุน)

# ูุชุณุฌูู ุงูุดุงุดุฉ ุนูู Linux
# - OBS Studio
# - SimpleScreenRecorder
# - Kazam
```

### 2. ุณููุงุฑูู ุงูุชุณุฌูู ุงูููุชุฑุญ

#### ุงูููุฏูุฉ (0:00 - 0:30)
```bash
# ุชุณุฌูู ุงูุดุงุดุฉ ูุน ุตูุช ุชูุถูุญู
echo "ูุฑุญุจุงูุ ุณูููู ุงูููู ุจุชูุซูู ุชุฌุฑุจุฉ ูุดุฑ ุงูุฅุตุฏุงุฑ 2.1.0 ุนูู ุจูุฆุฉ Staging"
echo "ุงูุชุงุฑูุฎ: $(date)"
echo "ุงูุจูุฆุฉ: staging.bthwani.com"
echo "ุงูุฅุตุฏุงุฑ: v2.1.0"
```

#### ูุญุต ุงูููุฏ ูุงูุงุฎุชุจุงุฑุงุช (0:30 - 2:00)
```bash
# ุนุฑุถ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑุงุช
git log --oneline -5
npm run test:all
npm run build

# ุดุฑุญ ูุง ูุชู ูุญุตู
echo "ููุญุต ุงูุชุบููุฑุงุช ูู ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ"
echo "ูุชุฃูุฏ ูู ูุฌุงุญ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช"
echo "ูุชุฃูุฏ ูู ุจูุงุก ุงููุดุฑูุน ุจูุฌุงุญ"
```

#### ูุดุฑ ุงูุฎุฏูุงุช (2:00 - 5:00)
```bash
# ุชุณุฌูู ุนูููุฉ ุงููุดุฑ
render services deploy bthwani-backend-api --env staging

# ูุฑุงูุจุฉ ุงููุดุฑ ูู ุงูููุช ุงููุนูู
render services logs bthwani-backend-api --env staging --follow

# ุดุฑุญ ูุง ูุญุฏุซ
echo "ุจุฏุก ูุดุฑ ุงูุฎุงุฏู ุงูุฎููู"
echo "ูุฑุงูุจุฉ ุงูุณุฌูุงุช ูู ุงูููุช ุงููุนูู"
echo "ุงูุชุธุงุฑ ุงูุชูุงู ุงููุดุฑ"
```

#### ูุญูุตุงุช ุงูุตุญุฉ (5:00 - 7:00)
```bash
# ูุญุต ุฌููุน ููุงุท ุงูุตุญุฉ
curl -f https://staging.bthwani.com/api/health
curl -f https://staging.bthwani.com/api/health/db
curl -f https://staging.bthwani.com/api/health/redis

# ุงุฎุชุจุงุฑ ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ
curl -X POST https://staging.bthwani.com/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"phone":"966501234567","password":"test123"}'

# ุดุฑุญ ุงููุญูุตุงุช
echo "ูุญุต ุงุณุชุฌุงุจุฉ ุงูุฎุงุฏู"
echo "ูุญุต ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช"
echo "ูุญุต ุงูุงุชุตุงู ุจู Redis"
echo "ุงุฎุชุจุงุฑ ุงููุตุงุฏูุฉ"
```

#### ุงุฎุชุจุงุฑุงุช ุงูุฃุฏุงุก (7:00 - 9:00)
```bash
# ุชุดุบูู ุงุฎุชุจุงุฑ ุงูุญูู
artillery run tests/staging-load-test.yml

# ูุฑุงูุจุฉ ุงูููุงููุณ
render metrics get --service bthwani-backend-api --env staging --hours 1

# ุดุฑุญ ุงูุงุฎุชุจุงุฑุงุช
echo "ุชุดุบูู ุงุฎุชุจุงุฑ ุงูุญูู ุนูู ุงูุจูุฆุฉ"
echo "ูุฑุงูุจุฉ ููุงููุณ ุงูุฃุฏุงุก"
echo "ุงูุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก"
```

#### ูุญุต ูุงุฌูุงุช ุงููุณุชุฎุฏู (9:00 - 10:00)
```bash
# ูุญุต ุชุทุจููุงุช ุงูููุจ
curl -f https://staging-admin.bthwani.com/
curl -f https://staging-app.bthwani.com/

# ููุงุณ ุณุฑุนุฉ ุงูุชุญููู
curl -w "@tests/curl-speed.txt" -o /dev/null -s https://staging-app.bthwani.com/

# ุดุฑุญ ุงููุญุต
echo "ูุญุต ููุญุฉ ุงูุฅุฏุงุฑุฉ"
echo "ูุญุต ุชุทุจูู ุงูุนููู"
echo "ููุงุณ ุณุฑุนุฉ ุงูุชุญููู"
```

### 3. ูุต ุงูุณููุงุฑูู ุงููุงูู ููููุฏูู

```bash
#!/bin/bash
# ุณููุงุฑูู ุงูููุฏูู ุงููุงูู

echo "=== ูุฑุญุจุงู ุจูู ูู ุชูุซูู ุชุฌุฑุจุฉ ุงููุดุฑ ==="
echo ""
echo "ุงูููู ุณูููู ุจุชูุซูู ุนูููุฉ ูุดุฑ ุงูุฅุตุฏุงุฑ 2.1.0 ุนูู ุจูุฆุฉ Staging"
echo "ุงูุชุงุฑูุฎ: $(date '+%Y-%m-%d %H:%M UTC%z')"
echo "ุงูุจูุฆุฉ: staging.bthwani.com"
echo ""

# 1. ูุญุต ุงูููุฏ
echo "=== ุงููุฑุญูุฉ 1: ูุญุต ุงูููุฏ ูุงูุงุฎุชุจุงุฑุงุช ==="
git log --oneline -5
npm run test:all
npm run build
echo ""

# 2. ูุดุฑ ุงูุฎุฏูุงุช
echo "=== ุงููุฑุญูุฉ 2: ูุดุฑ ุงูุฎุฏูุงุช ==="
render services deploy bthwani-backend-api --env staging
render services logs bthwani-backend-api --env staging --lines 20
echo ""

# 3. ูุญูุตุงุช ุงูุตุญุฉ
echo "=== ุงููุฑุญูุฉ 3: ูุญูุตุงุช ุงูุตุญุฉ ==="
curl -f https://staging.bthwani.com/api/health
curl -f https://staging.bthwani.com/api/health/db
curl -f https://staging.bthwani.com/api/health/redis
echo ""

# 4. ุงุฎุชุจุงุฑุงุช ุงููุธุงุฆู
echo "=== ุงููุฑุญูุฉ 4: ุงุฎุชุจุงุฑุงุช ุงููุธุงุฆู ==="
# ุงุฎุชุจุงุฑ ุงููุตุงุฏูุฉ
curl -X POST https://staging.bthwani.com/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"phone":"966501234567","password":"test123"}' | jq '.'

# ุงุฎุชุจุงุฑ ุฅูุดุงุก ุทูุจ
TOKEN="eyJhbGciOiJIUzI1NiIs..."
curl -X POST https://staging.bthwani.com/api/v1/orders \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"items":[{"productId":"prod123","quantity":2}]}' | jq '.'
echo ""

# 5. ุงุฎุชุจุงุฑุงุช ุงูุฃุฏุงุก
echo "=== ุงููุฑุญูุฉ 5: ุงุฎุชุจุงุฑุงุช ุงูุฃุฏุงุก ==="
artillery run tests/staging-load-test.yml
render metrics get --service bthwani-backend-api --env staging --hours 1 | jq '.'
echo ""

# 6. ูุญุต ูุงุฌูุงุช ุงููุณุชุฎุฏู
echo "=== ุงููุฑุญูุฉ 6: ูุญุต ูุงุฌูุงุช ุงููุณุชุฎุฏู ==="
curl -I https://staging-admin.bthwani.com/
curl -I https://staging-app.bthwani.com/
echo ""

# 7. ูุฑุงูุจุฉ ุดุงููุฉ
echo "=== ุงููุฑุญูุฉ 7: ูุฑุงูุจุฉ ุดุงููุฉ ==="
render services status --env staging
render services logs bthwani-backend-api --env staging --lines 50 | grep -E "(error|Error|ERROR)" | head -10
echo ""

echo "=== ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ ==="
echo "โ ุงููุดุฑ ุชู ุจูุฌุงุญ"
echo "โ ุฌููุน ูุญูุตุงุช ุงูุตุญุฉ ูุฌุญุช"
echo "โ ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ ุชุนูู ุจุดูู ุทุจูุนู"
echo "โ ุงูุฃุฏุงุก ุถูู ุงูุญุฏูุฏ ุงูููุจููุฉ"
echo "โ ุงูุจูุฆุฉ ุฌุงูุฒุฉ ูููุดุฑ ูู ุงูุฅูุชุงุฌ"
echo ""
echo "=== ุงูุชูุช ุงูุชุฌุฑุจุฉ ุจูุฌุงุญ ==="
```

### 4. ููุทุงุช ุดุงุดุฉ ููุชุฑุญุฉ

#### ููุทุฉ 1: ูุญุต ุงูููุฏ ูุงูุงุฎุชุจุงุฑุงุช
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Terminal - Git Log & Tests                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ $ git log --oneline -5                                  โ
โ a1b2c3d [feat] ุฅุถุงูุฉ ุฎุงุตูุฉ ุงูุชูููู ุงูุฌุฏูุฏุฉ         โ
โ d4e5f6g [fix] ุฅุตูุงุญ ูุดููุฉ ูู ุญุณุงุจ ุงูุนูููุงุช          โ
โ h7i8j9k [perf] ุชุญุณูู ุฃุฏุงุก ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช   โ
โ $ npm run test:all                                      โ
โ โ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูุฌุญุช (156/156)                   โ
โ $ npm run build                                         โ
โ โ ุงูุจูุงุก ููุชูู ุจูุฌุงุญ                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ููุทุฉ 2: ูุฑุงูุจุฉ ุงููุดุฑ ูู ุงูููุช ุงููุนูู
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Render Dashboard - Deployment Logs                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ ูุดุฑ ุงูุฎุฏูุฉ: bthwani-backend-api                     โ
โ ๐ฆ ุงูุจูุงุก: npm run build                               โ
โ ๐ ุงููุดุฑ: rolling update                               โ
โ โฑ๏ธ ุงูููุช ุงููุชููุน: 3-5 ุฏูุงุฆู                          โ
โ [14:16:23] โ ุงูุจูุงุก ููุชูู                             โ
โ [14:16:25] ๐ ุจุฏุก ุงูุฎุงุฏู                              โ
โ [14:16:27] ๐ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช                 โ
โ [14:16:28] ๐ ุงูุงุชุตุงู ุจู Redis                         โ
โ [14:16:29] โ ุงูุฎุฏูุฉ ุฌุงูุฒุฉ ุนูู ุงููููุฐ 3000           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ููุทุฉ 3: ูุชุงุฆุฌ ูุญูุตุงุช ุงูุตุญุฉ
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ API Health Check Results                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ GET /api/health                                         โ
โ {                                                       โ
โ   "status": "healthy",                                  โ
โ   "timestamp": "2025-01-10T14:20:30Z",                 โ
โ   "version": "2.1.0",                                   โ
โ   "uptime": "0h 4m 30s",                               โ
โ   "database": "connected",                              โ
โ   "redis": "connected"                                  โ
โ }                                                       โ
โ                                                         โ
โ GET /api/health/db                                      โ
โ { "status": "healthy", "database": { "collections": 24 }}โ
โ                                                         โ
โ GET /api/health/redis                                   โ
โ { "status": "healthy", "redis": "connected" }           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ููุทุฉ 4: ูุชุงุฆุฌ ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Load Test Results                                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Artillery Load Test Summary                             โ
โ =====================================================   โ
โ   Phase completed: warm-up                              โ
โ   Phase completed: main-load                            โ
โ   Phase completed: ramp-down                            โ
โ                                                         โ
โ   Summary:                                              โ
โ     http.codes.200: 1487 (99.13%)                      โ
โ     http.response_time.p95: 234ms                       โ
โ     http.response_time.p99: 345ms                       โ
โ     http.requests.total: 1500                           โ
โ                                                         โ
โ โ ุงุฎุชุจุงุฑ ุงูุญูู ูุฌุญ - ุงูุฃุฏุงุก ููุชุงุฒ                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 5. ุฅุฑุดุงุฏุงุช ูุง ุจุนุฏ ุงูุฅูุชุงุฌ

#### ุชุญููู ุงูููุฏูู ุฅูู ุตูุบุฉ ููุงุณุจุฉ:
```bash
# ุงุณุชุฎุฏุงู FFmpeg ูุชุญููู ุงูููุฏูู
ffmpeg -i deployment-demo-raw.mp4 \
  -vf "scale=1920:1080:force_original_aspect_ratio=decrease,pad=1920:1080:(ow-iw)/2:(oh-ih)/2" \
  -c:v libx264 -crf 23 -preset medium \
  -c:a aac -b:a 128k \
  -movflags +faststart \
  deployment-demo-final.mp4
```

#### ุฑูุน ุงูููุฏูู ุฅูู ููุตุฉ ูุดุงุฑูุฉ:
```bash
# ุฑูุน ุฅูู YouTube ุฃู Vimeo
# ุฃู ูุดุงุฑูุชู ูู ูุณุชูุฏุน ุงููุดุฑูุน ูููู

# ุฅุถุงูุฉ ุงูููุฏูู ูููู ูู ุงููุณุชูุฏุน
git add docs/deployment/staging-deployment-demo.mp4
git commit -m "ุฅุถุงูุฉ ุชูุซูู ููุฏูู ูุชุฌุฑุจุฉ ุงููุดุฑ ุนูู Staging"
git push origin main
```

### 6. ูุงุฆูุฉ ูุฑุฌุนูุฉ ููุชุณุฌูู

- [ ] ุฅุนุฏุงุฏ ุงููููุฑูููู ูุงููุงููุฑุง
- [ ] ูุญุต ุฌูุฏุฉ ุงูุตูุช ูุงูุตูุฑุฉ
- [ ] ุฅุนุฏุงุฏ ุณููุงุฑูู ุงูุชุณุฌูู
- [ ] ุชุณุฌูู ุงูููุฏูุฉ ูุงูุฎุงุชูุฉ
- [ ] ุชุณุฌูู ูู ูุฑุญูุฉ ูู ูุฑุงุญู ุงููุดุฑ
- [ ] ุฅุถุงูุฉ ุชุนูููุงุช ุตูุชูุฉ ุชูุถูุญูุฉ
- [ ] ูุฑุงุฌุนุฉ ุงูููุฏูู ูุชุนุฏููู
- [ ] ุชุตุฏูุฑ ุงูููุฏูู ุจุงูุฌูุฏุฉ ุงูููุงุณุจุฉ
- [ ] ุฑูุน ุงูููุฏูู ููุดุงุฑูุฉ ุงูุฑุงุจุท

### 7. ุจุฏุงุฆู ููููุฏูู

#### ุฅุฐุง ูู ููู ุงูููุฏูู ููููุงู:

**ููุทุงุช ุดุงุดุฉ ููุตูุฉ**:
```bash
# ุงูุชูุงุท ููุทุงุช ุดุงุดุฉ ููู ูุฑุญูุฉ ูููุฉ
import -window root -delay 200 docs/deployment/screenshots/step-01-code-review.png
import -window root -delay 200 docs/deployment/screenshots/step-02-deployment.png
import -window root -delay 200 docs/deployment/screenshots/step-03-health-checks.png
import -window root -delay 200 docs/deployment/screenshots/step-04-performance-test.png
import -window root -delay 200 docs/deployment/screenshots/step-05-final-results.png
```

**ุณุฌู ูุตู ููุตู**:
```bash
# ุฅูุดุงุก ุณุฌู ูุตู ุดุงูู ููุชุฌุฑุจุฉ
cat > docs/deployment/staging-deployment-log.txt << 'EOF'
ุชุงุฑูุฎ ุงูุชุฌุฑุจุฉ: 2025-01-10 14:00 UTC+3
ุงูุจูุฆุฉ: staging.bthwani.com
ุงูุฅุตุฏุงุฑ: v2.1.0

ุงููุฑุญูุฉ 1: ูุญุต ุงูููุฏ ูุงูุงุฎุชุจุงุฑุงุช
=====================================
- ุชู ูุญุต 5 ุชุบููุฑุงุช ุฃุฎูุฑุฉ ูู Git
- ูุฌุญุช ุฌููุน ุงูุงุฎุชุจุงุฑุงุช (156/156)
- ุชู ุจูุงุก ุงููุดุฑูุน ุจูุฌุงุญ

ุงููุฑุญูุฉ 2: ูุดุฑ ุงูุฎุฏูุงุช
========================
- ุจุฏุก ุงููุดุฑ: 14:15
- ุงูุชูุงู ุงูุจูุงุก: 14:16
- ุจุฏุก ุงูุฎุงุฏู: 14:16
- ุงูุชูุงู ุงููุดุฑ: 14:19

ุงููุฑุญูุฉ 3: ูุญูุตุงุช ุงูุตุญุฉ
=========================
- ูุญุต ุงูุตุญุฉ ุงูุนุงู: โ ูุฌุญ
- ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช: โ ูุชุตู
- ูุญุต Redis: โ ูุชุตู

ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ:
โ ุงููุดุฑ ุชู ุจูุฌุงุญ
โ ุฌููุน ุงููุญูุตุงุช ูุฌุญุช
โ ุงูุฃุฏุงุก ููุชุงุฒ (234ms p95)
โ ุงูุจูุฆุฉ ุฌุงูุฒุฉ ููุฅูุชุงุฌ
EOF
```

---

ูุฐุง ุงูุฏููู ูููุฑ ุฅุฑุดุงุฏุงุช ุนูููุฉ ูุชูุซูู ุชุฌุฑุจุฉ ุงููุดุฑ ุนูู Staging ุจุทุฑููุฉ ููููุฉ ููููุฏุฉ ูููุฑูู ูุงููุทูุฑูู ุงููุณุชูุจูููู.
