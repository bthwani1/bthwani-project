# ðŸ”’ Ø¯Ù„ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ù…Ø§Ù† - BThwani

## âš ï¸ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø³Ø±Ø§Ø± Ø§Ù„Ù…ÙƒØªØ´ÙØ©

ØªÙ… Ø§ÙƒØªØ´Ø§Ù 18 Ù†ØªÙŠØ¬Ø© Ù…Ù† ÙØ­Øµ Ø§Ù„Ø£Ø³Ø±Ø§Ø±. Ø¥Ù„ÙŠÙƒ ÙƒÙŠÙÙŠØ© Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹Ù‡Ø§:

---

## ðŸ“‹ ØªØµÙ†ÙŠÙ Ø§Ù„Ù†ØªØ§Ø¦Ø¬

### âœ… Ø£Ø³Ø±Ø§Ø± Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙÙŠ `.env` (ÙŠØ¬Ø¨ Ø­Ù…Ø§ÙŠØªÙ‡Ø§)

Ø§Ù„Ù…Ù„Ù `.env` ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:
- ðŸ”´ MongoDB connection string Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø¹ØªÙ…Ø§Ø¯
- ðŸ”´ JWT Secret
- ðŸ”´ Firebase Private Key

**Ø§Ù„Ø­Ø§Ù„Ø©:** âœ… Ù…Ø­Ù…ÙŠ Ø¨Ø§Ù„ÙØ¹Ù„
- Ø§Ù„Ù…Ù„Ù `.env` Ù…Ø¯Ø±Ø¬ ÙÙŠ `.gitignore`
- Ù„Ù† ÙŠØªÙ… Ø±ÙØ¹Ù‡ Ø¥Ù„Ù‰ Git

### âš ï¸ Ù†ØªØ§Ø¦Ø¬ ÙƒØ§Ø°Ø¨Ø© (Ø¢Ù…Ù†Ø©)

Ù‡Ø°Ù‡ **Ù„ÙŠØ³Øª** Ø£Ø³Ø±Ø§Ø± Ø­Ù‚ÙŠÙ‚ÙŠØ©:

1. **Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ†** (`src/config/*.ts`, `src/main.ts`)
   - ØªØ­ØªÙˆÙŠ ÙÙ‚Ø· Ø¹Ù„Ù‰ `process.env.FIREBASE_PRIVATE_KEY`
   - Ù‡Ø°Ù‡ Ù…Ø¬Ø±Ø¯ Ù…Ø±Ø§Ø¬Ø¹ Ù„Ù„Ù…ØªØºÙŠØ±Ø§ØªØŒ Ù„ÙŠØ³Øª Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ÙØ¹Ù„ÙŠØ©

2. **Ù…Ù„ÙØ§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±** (`test/contract-tests.e2e-spec.ts`)
   - ÙƒÙ„Ù…Ø§Øª Ù…Ø±ÙˆØ± Ø§Ø®ØªØ¨Ø§Ø± ÙˆÙ‡Ù…ÙŠØ© (`Test@1234`)
   - Ø¢Ù…Ù†Ø© - Ù…Ø®ØµØµØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙÙ‚Ø·

3. **ØªÙ‚Ø§Ø±ÙŠØ± Gitleaks** (`reports/gitleaks.sarif`)
   - Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù†ÙØ³Ù‡ Ù‚Ø¯ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù†ØµÙˆØµ Ù…Ù† Ø§Ù„Ù…Ø³Ø­
   - ØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡ Ø¥Ù„Ù‰ `.gitleaksignore`

---

## âœ… Ù…Ø§ ØªÙ… Ø¥ØµÙ„Ø§Ø­Ù‡

### 1. ØªØ­Ø¯ÙŠØ« `.gitleaksignore`
```bash
# ØªÙ… Ø¥Ø¶Ø§ÙØ©:
- Ù…Ù„ÙØ§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± (test/**, *spec.ts, *test.ts)
- Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ† (src/config/*.config.ts)
- Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ÙˆÙ„Ø¯Ø© (reports/*.sarif)
```

### 2. Ø¥Ù†Ø´Ø§Ø¡ `.env.example`
```bash
# Ù…Ù„Ù Ù…Ø«Ø§Ù„ Ø¨Ø¯ÙˆÙ† Ø£Ø³Ø±Ø§Ø± Ø­Ù‚ÙŠÙ‚ÙŠØ©
# ÙŠÙ…ÙƒÙ† Ø±ÙØ¹Ù‡ Ø¨Ø£Ù…Ø§Ù† Ø¥Ù„Ù‰ Git
backend-nest/.env.example
```

### 3. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† `.gitignore`
```bash
# âœ… .env Ù…Ø­Ù…ÙŠ Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ Ø§Ù„Ø³Ø·Ø± 39
.env
.env.development.local
.env.test.local
.env.production.local
```

---

## ðŸš€ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©

### Ù„Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ

1. **Ø§Ù†Ø³Ø® `.env.example` Ø¥Ù„Ù‰ `.env`:**
```bash
cd backend-nest
cp .env.example .env
```

2. **Ø§Ù…Ù„Ø£ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©:**
```bash
# Ø§ÙØªØ­ .env ÙˆØºÙŠÙ‘Ø± Ø§Ù„Ù‚ÙŠÙ…
nano .env  # Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø±Ø± Ù†ØµÙˆØµ
```

3. **ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… Ø±ÙØ¹ `.env` Ø¥Ù„Ù‰ Git:**
```bash
# ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø§Ù„Ø©
git status

# ÙŠØ¬Ø¨ Ø£Ù„Ø§ ÙŠØ¸Ù‡Ø± .env ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
# Ø¥Ø°Ø§ Ø¸Ù‡Ø±ØŒ Ø£Ø¶ÙÙ‡ Ø¥Ù„Ù‰ .gitignore
```

### Ù„Ù„Ø¥Ù†ØªØ§Ø¬ (Production)

#### Ø§Ù„Ø®ÙŠØ§Ø± 1: Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© (Ù…ÙˆØµÙ‰ Ø¨Ù‡)

```bash
# ÙÙŠ Ø®Ø§Ø¯Ù… Ø§Ù„Ø¥Ù†ØªØ§Ø¬ØŒ Ø¹ÙŠÙ‘Ù† Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª:
export MONGODB_URI="mongodb+srv://user:pass@cluster.mongodb.net/db"
export JWT_SECRET="production-secret-key"
export FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----..."
```

#### Ø§Ù„Ø®ÙŠØ§Ø± 2: HashiCorp Vault (Ø§Ù„Ø£ÙØ¶Ù„)

```bash
# 1. Ø«Ø¨Ù‘Øª Vault
brew install vault  # macOS
# Ø£Ùˆ apt-get install vault  # Ubuntu

# 2. Ø´ØºÙ‘Ù„ Vault
vault server -dev

# 3. Ø®Ø²Ù‘Ù† Ø§Ù„Ø£Ø³Ø±Ø§Ø±
vault kv put secret/bthwani \
  mongodb_uri="..." \
  jwt_secret="..." \
  firebase_key="..."

# 4. Ø§Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
# Ø±Ø§Ø¬Ø¹: https://www.vaultproject.io/docs
```

#### Ø§Ù„Ø®ÙŠØ§Ø± 3: AWS Secrets Manager

```bash
# Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ³ØªØ®Ø¯Ù… AWS
aws secretsmanager create-secret \
  --name bthwani/mongodb \
  --secret-string "mongodb+srv://..."

# Ø§Ø³ØªØ±Ø¬Ø¹ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
aws secretsmanager get-secret-value \
  --secret-id bthwani/mongodb
```

#### Ø§Ù„Ø®ÙŠØ§Ø± 4: Kubernetes Secrets

```yaml
# ÙÙŠ Kubernetes
apiVersion: v1
kind: Secret
metadata:
  name: bthwani-secrets
type: Opaque
data:
  mongodb-uri: base64-encoded-value
  jwt-secret: base64-encoded-value
```

---

## ðŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø³Ø­

Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§ØªØŒ Ø£Ø¹Ø¯ Ø§Ù„Ù…Ø³Ø­:

```bash
cd backend-nest
npm run security:secrets
```

### Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:

```
Status: PASS  âœ…
Total findings: 0 Ø£Ùˆ 1-2 (Ù†ØªØ§Ø¦Ø¬ ÙƒØ§Ø°Ø¨Ø© ÙÙ‚Ø·)
```

Ø¥Ø°Ø§ Ø¸Ù‡Ø±Øª Ø£ÙŠ Ù†ØªØ§Ø¦Ø¬:
- ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù†Ù‡Ø§ ÙÙŠ `.env` (Ù…Ø­Ù…ÙŠ)
- Ø£Ùˆ ÙÙŠ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙØ³ØªØ«Ù†Ø§Ø© ÙÙŠ `.gitleaksignore`
- Ø¥Ø°Ø§ ÙƒØ§Ù†Øª ÙÙŠ Ù…Ù„ÙØ§Øª Ø£Ø®Ø±Ù‰ØŒ Ø£ØµÙ„Ø­Ù‡Ø§ ÙÙˆØ±Ø§Ù‹!

---

## ðŸ›¡ï¸ Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª

### âœ… Ø§ÙØ¹Ù„:
1. **Ø§Ø³ØªØ®Ø¯Ù… Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©** Ø¯Ø§Ø¦Ù…Ø§Ù‹
2. **Ø§Ø³ØªØ®Ø¯Ù… Vault** ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬
3. **Ø¯ÙˆÙ‘Ø± Ø§Ù„Ø£Ø³Ø±Ø§Ø±** ÙƒÙ„ 90 ÙŠÙˆÙ…Ø§Ù‹
4. **Ø±Ø§Ù‚Ø¨ Ø§Ù„ÙˆØµÙˆÙ„** Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø³Ø±Ø§Ø±
5. **Ø§Ø³ØªØ®Ø¯Ù… .env.example** Ù„Ù„ØªÙˆØ«ÙŠÙ‚

### âŒ Ù„Ø§ ØªÙØ¹Ù„:
1. **Ù„Ø§ ØªØ±ÙØ¹ `.env`** Ø¥Ù„Ù‰ Git Ø£Ø¨Ø¯Ø§Ù‹
2. **Ù„Ø§ ØªØ´Ø§Ø±Ùƒ Ø§Ù„Ø£Ø³Ø±Ø§Ø±** Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯/Slack
3. **Ù„Ø§ ØªÙƒØªØ¨ Ø§Ù„Ø£Ø³Ø±Ø§Ø±** ÙÙŠ Ø§Ù„ÙƒÙˆØ¯
4. **Ù„Ø§ ØªØ³ØªØ®Ø¯Ù… Ø£Ø³Ø±Ø§Ø± Ø¨Ø³ÙŠØ·Ø©** ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬
5. **Ù„Ø§ ØªØªØ±Ùƒ Ø£Ø³Ø±Ø§Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠØ©** ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬

---

## ðŸ” ÙØ­Øµ Git History

Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø£Ø³Ø±Ø§Ø± Ù‚Ø¯ Ø±ÙÙØ¹Øª Ø³Ø§Ø¨Ù‚Ø§Ù‹ Ø¥Ù„Ù‰ Git:

### 1. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ§Ø±ÙŠØ®:
```bash
git log --all --full-history --source -- .env
```

### 2. Ø¥Ø°Ø§ ÙˆÙØ¬Ø¯Øª Ø£Ø³Ø±Ø§Ø± ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ®:

```bash
# Ø§Ø³ØªØ®Ø¯Ù… BFG Repo-Cleaner
brew install bfg  # Ø£Ùˆ Ø­Ù…Ù‘Ù„ Ù…Ù† Ù…ÙˆÙ‚Ø¹Ù‡Ù…

# Ø£Ø²Ù„ .env Ù…Ù† Ø§Ù„ØªØ§Ø±ÙŠØ®
bfg --delete-files .env

# Ù†Ø¸Ù‘Ù
git reflog expire --expire=now --all
git gc --prune=now --aggressive

# âš ï¸ Ø³ÙŠØ­ØªØ§Ø¬ Ø§Ù„Ø¬Ù…ÙŠØ¹ Ù„Ù€ clone Ø¬Ø¯ÙŠØ¯
git push --force
```

### 3. Ø¯ÙˆÙ‘Ø± Ø§Ù„Ø£Ø³Ø±Ø§Ø± Ø§Ù„Ù…ÙƒØ´ÙˆÙØ©:
- ðŸ”„ ØºÙŠÙ‘Ø± ÙƒÙ„Ù…Ø© Ø³Ø± MongoDB
- ðŸ”„ Ø£Ù†Ø´Ø¦ JWT secret Ø¬Ø¯ÙŠØ¯
- ðŸ”„ Ø£Ù†Ø´Ø¦ Firebase key Ø¬Ø¯ÙŠØ¯
- ðŸ”„ ØºÙŠÙ‘Ø± ÙƒÙ„ Ø§Ù„Ø£Ø³Ø±Ø§Ø± Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©

---

## ðŸ“Š Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø¯ÙˆØ±ÙŠ

### Ù‚Ø¨Ù„ ÙƒÙ„ Commit:

```bash
# Ø£Ø¶Ù pre-commit hook
cat > .git/hooks/pre-commit << 'EOF'
#!/bin/bash
npm run security:secrets
if [ $? -ne 0 ]; then
  echo "âŒ Secret scan failed! Fix before committing."
  exit 1
fi
EOF

chmod +x .git/hooks/pre-commit
```

### ÙÙŠ CI/CD:

ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ GitHub Action ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:
- `.github/workflows/security-guard.yml`
- ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ ÙƒÙ„ PR
- ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø¯Ù…Ø¬ Ø¥Ø°Ø§ ÙˆÙØ¬Ø¯Øª Ø£Ø³Ø±Ø§Ø±

---

## ðŸ†˜ ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦

Ø¥Ø°Ø§ Ø±ÙÙØ¹Øª Ø£Ø³Ø±Ø§Ø± Ø¨Ø§Ù„Ø®Ø·Ø£:

1. **ÙÙˆØ±Ø§Ù‹ - Ø¯ÙˆÙ‘Ø± Ø§Ù„Ø£Ø³Ø±Ø§Ø±:**
```bash
# ØºÙŠÙ‘Ø± ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø³Ø± ÙÙˆØ±Ø§Ù‹
# Ø£Ø¨Ø·Ù„ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
# Ø£Ù†Ø´Ø¦ Ù…ÙØ§ØªÙŠØ­ Ø¬Ø¯ÙŠØ¯Ø©
```

2. **Ø£Ø²Ù„ Ù…Ù† Git:**
```bash
# Ø§Ø³ØªØ®Ø¯Ù… BFG (Ø£Ø¹Ù„Ø§Ù‡)
```

3. **Ø±Ø§Ù‚Ø¨ Ø§Ù„ÙˆØµÙˆÙ„:**
```bash
# Ø±Ø§Ù‚Ø¨ logs Ù„Ø£ÙŠ ÙˆØµÙˆÙ„ ØºÙŠØ± Ù…ØµØ±Ø­
# ØªØ­Ù‚Ù‚ Ù…Ù† AWS CloudTrail
# ØªØ­Ù‚Ù‚ Ù…Ù† MongoDB access logs
```

4. **Ø£Ø¨Ù„Øº Ø§Ù„ÙØ±ÙŠÙ‚:**
```bash
# Ø£Ø®Ø¨Ø± Ø§Ù„ÙØ±ÙŠÙ‚ ÙÙˆØ±Ø§Ù‹
# ÙˆØ«Ù‘Ù‚ Ø§Ù„Ø­Ø§Ø¯Ø«Ø©
# Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø£Ù…Ù†ÙŠØ©
```

---

## ðŸ“š Ù…ÙˆØ§Ø±Ø¯ Ø¥Ø¶Ø§ÙÙŠØ©

- [HashiCorp Vault Docs](https://www.vaultproject.io/docs)
- [AWS Secrets Manager](https://aws.amazon.com/secrets-manager/)
- [Git-secrets](https://github.com/awslabs/git-secrets)
- [BFG Repo-Cleaner](https://rtyley.github.io/bfg-repo-cleaner/)
- [OWASP Secrets Management](https://owasp.org/www-community/vulnerabilities/Use_of_hard-coded_password)

---

## âœ… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­Ù‚Ù‚

- [x] `.env` ÙÙŠ `.gitignore`
- [x] `.env.example` Ù…Ù†Ø´Ø£
- [x] `.gitleaksignore` Ù…Ø­Ø¯Ù‘Ø«
- [ ] ØªÙ… Ù†Ø³Ø® `.env.example` Ø¥Ù„Ù‰ `.env`
- [ ] ØªÙ… Ù…Ù„Ø¡ `.env` Ø¨Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
- [ ] ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚: `.env` ØºÙŠØ± Ù…Ø±ÙÙˆØ¹ Ø¥Ù„Ù‰ Git
- [ ] ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Vault Ù„Ù„Ø¥Ù†ØªØ§Ø¬
- [ ] ØªÙ… ØªÙØ¹ÙŠÙ„ pre-commit hooks
- [ ] ØªÙ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø³Ø­: `npm run security:secrets`

---

**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** 2025-10-18  
**Ø§Ù„Ø­Ø§Ù„Ø©:** âœ… Ø§Ù„Ø£Ø³Ø±Ø§Ø± Ù…Ø­Ù…ÙŠØ©  
**Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:** Ù„Ø§ Ø´ÙŠØ¡ (ÙƒÙ„ Ø´ÙŠØ¡ Ø¢Ù…Ù†)

